!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(){return Boolean(window.martech&&window.martech.info&&!0===window.martech.info.debug)};if(window.console&&window.console.log&&n()){var r="prod",a="prod"===r?{color:"orange",background:"black"}:{color:"yellow",background:"#093547"};"string"!=typeof e?console.log("%c MARTECH (".concat("prod".toUpperCase(),") :: ").concat(t||""),"background:".concat(a.background,";color:").concat(a.color,";padding:4px;border:1px solid ").concat(a.color,";"),e):console.log("%c MARTECH (".concat("prod".toUpperCase(),") :: ").concat(e," "),"background:".concat(a.background,";color:").concat(a.color,";padding:4px;border:1px solid ").concat(a.color,";"))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u}));n(7);var r=n(0),a=(n(4),function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n="function"==typeof window.URL?new window.URL(t).search.substring(1):t.split("?")[1],r=n.split("&"),a=0;a<r.length;a++){var o=r[a].split("=");if(o[0]===e)return o[1]}return!1}),o=function(e){var t,n={"3for1":"https://secure.telegraph.co.uk/customer/secure/get-started/?productId=nyytq4zthbvwsoliojugwyzzmyzha3dt&offerId=digital-month-intro-RP208",digitalsubscriptionthreeperweek:"https://secure.telegraph.co.uk/customer/secure/get-started/?productId=nyytq4zthbvwsoliojugwyzzmyzha3dt&offerId=freetrial-digital-month-RP000",digitalplussubscriptionfthalfthree:"https://secure.telegraph.co.uk/customer/secure/get-started/?productId=nbrdk4rzgjwte4dmnnzhgobuobvwgytm&offerId=freetrial-digitalplus-month-RP001","/secure/upgrades":"https://secure.telegraph.co.uk/customer/secure/get-started/?productId=nyytq4zthbvwsoliojugwyzzmyzha3dt&offerId=digital-month-RP004"};for(var r in e)if(e[r])for(var o in e[r].includes("offerId")&&(t=e[r]),n)e[r].includes(o)&&(t=n[o]);return{offer:a("offerId",t),product:a("productId",t)}},i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(0!==Object.keys(t).length&&n)try{if(void 0===window.s)throw new Error("MARTECH :: Waiting for s before firing tracking");for(var o in t)"eVar75"===o&&a.campaignName?s[o]="".concat(a.campaignName,"_").concat(t[o]):s[o]=t[o],Object(r.a)("TRACKING :: ".concat(a.campaignName," --\x3e analyticsCall ").concat(o," = ").concat(s[o]));Array.isArray(n)&&(n=n.join(",")),s.events=n,s.linkTrackEvents=n,s.linkTrackVars="events,"+_satellite.getVar("TMG linkTrackVars"),s.tl(!0,"o","Target Custom")}catch(r){setTimeout((function(){e(t,n,a)}),200)}},c=function(e,t){var n=o(t.data);i({eVar75:e,eVar61:n.product,prop30:n.offer},["event52","event245"],t)},l=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n.campaignName){var o=a?t:"".concat(n.campaignName,"_").concat(t);try{if(void 0===window.s)throw new Error("MARTECH :: Waiting for s before firing tracking");s.eVar75=o,s.events="event52",s.linkTrackEvents="event52",s.linkTrackVars="events,eVar75"+_satellite.getVar("TMG linkTrackVars"),s.tl(!0,"o","Target Custom"),Object(r.a)("TRACKING :: ".concat(n.campaignName," --\x3e sendEventHit eVar75 = ").concat(o))}catch(r){setTimeout((function(){e(t,n,a)}),200)}}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&adobe.target.trackEvent({mbox:e,params:t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u}));var r=n(9),a=n(11),o={loading:{message:"Please wait a moment, do not refresh."},error:{heading:"Sorry, there was an error",register:{message:'Please take a second or two to <a class="martech-one-tap-modal__message-link-error" href="https://secure.telegraph.co.uk/customer/secure/register?ICID=martech-one-tap-journey__reg-error">finish setting up your account.</a>',buttonText:""},update:{message:"Please visit My Account to select your preferences",buttonText:"My Account",buttonUrl:"https://secure.telegraph.co.uk/customer/secure/newsletters?ICID=martech-one-tap-journey__pref-error"}},stepOne:{message:"To complete your registered account set up, select from our range of free newsletters and opt in to receive our latest offers below:",marketing:"I would like to receive by email other offers, promotions and services from Telegraph Media Group Ltd and its group companies",buttonText:"Confirm"},stepTwo:{heading:function(e){return"united kingdom"===e?"You can now start exploring our journalism.":"You can now explore our journalism free for the next 24 hours."},message:function(e){return"united kingdom"===e?'<a class="martech-one-tap-modal__message-link" href="https://secure.telegraph.co.uk/customer/secure/newsletters?ICID=martech-one-tap-journey__further-signups">Sign up</a> for more of our newsletters and enjoy a regular dose of rare insights on the stories and subjects that you care about.':'Enjoy extra insight from our journalists. <a class="martech-one-tap-modal__message-link" href="https://secure.telegraph.co.uk/customer/secure/newsletters?ICID=martech-one-tap-journey__further-signups">Sign up for their newsletters here.</a>'}}},s=function(){return'\n\t\t<div class="martech-one-tap-modal__container">\n\t\t\t<header class="martech-one-tap-modal__header">\n\t\t\t\t<svg class="martech-one-tap-modal__icon" viewBox="0 0 34 34" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<path class="martech-one-tap-modal__icon-bg" d="M17 0L0 17l17 17 17-17L17 0z"/>\n\t\t\t\t\t<path class="martech-one-tap-modal__icon-logo" d="M10.704 18.795c0-2.707 2.026-4.57 3.957-5.426l.177.231c-.707.789-1.238 1.537-1.238 3.128 0 1.849.49 3.14 1.279 3.984.272-.3.421-.748.421-1.142v-2.638l3.427-2.448.19.258c-.272.422-.49.816-.49 1.455v1.619c0 1.291-2.025 2.57-3.317 3.113.83.748 1.944 1.061 3.155 1.061.49 0 .938-.013 1.346-.081v-7.656c-1.047-.068-2.026-.313-2.937-.571-1.061-.3-2.475-.68-3.386-.68-1.347 0-2.965.448-3.005 2.393 0 .19.013.38.04.598l-.326.11a5.087 5.087 0 01-.354-1.81c-.027-2.447 1.74-4.555 4.596-4.555 1.197 0 2.611.381 3.59.667 1.061.299 2.135.57 3.155.57.517 0 .83-.271.83-.76 0-.49-.259-.722-.68-.83l.068-.34c1.25.23 2.597.979 2.597 2.515 0 1.809-1.36 2.747-3.617 2.747h-.19v7.533c1.386-.299 2.338-.979 3.073-2.107l.299.15c-.775 2.597-2.842 5.126-6.283 5.126-3.521-.014-6.377-2-6.377-6.214z" fill="#222"/>\n\t\t\t\t</svg>\n\t\t\t\t<h1 class="martech-one-tap-modal__heading martech-one-tap-modal--no-margin">Weâ€™re creating your account</h1>\n\t\t\t</header>\n\t\t\t<main class="martech-one-tap-modal__main">\n\t\t\t\t'.concat(i(),"\n\t\t\t</main>\n\t\t</div>")},i=function(){return"\n\t\t".concat(g(),'\n\t\t<p class="martech-one-tap-modal__loading-message">').concat(o.loading.message,"</p>")},c=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"register":"update";return'\n\t\t<div class="martech-one-tap-modal__error-container">\n\t\t\t<div class="martech-one-tap-modal__error-copy">\n\t\t\t\t<h2 class="martech-one-tap-modal__error-heading martech-one-tap-modal--no-margin">\n\t\t\t\t\t<svg class="martech-one-tap-modal__error-heading-icon" width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 15H9v-2h2v2zm0-4H9V5h2v6z" fill="#E67350"/></svg>\n\t\t\t\t\t<span>'.concat(o.error.heading,'</span>\n\t\t\t\t</h2>\n\t\t\t\t<p class="martech-one-tap-modal__message martech-one-tap-modal__message--error">').concat(o.error[t].message,"</p>\n\t\t\t</div>\n\t\t\t").concat(o.error[t].buttonText?'<a class="martech-one-tap-modal__error-button" href="'.concat(o.error[t].buttonUrl,'">').concat(o.error[t].buttonText,"</a>"):"","\n\t\t</div>")},l=function(e){return'\n\t\t<p class="martech-one-tap-modal__message">'.concat(o.stepOne.message,'</p>\n\t\t<div class="martech-one-tap-modal__newsletter-cards-container">\n\t\t\t').concat(d(e),'\n\t\t</div>\n\t\t<form>\n\t\t\t<div class="martech-one-tap-modal__input-container martech-one-tap-modal__input-container--checkbox">\n\t\t\t\t<input class="martech-one-tap-modal__checkbox" type="checkbox" name="martechOffers" id="martechOffers" />\n\t\t\t\t<label class="martech-one-tap-modal__input-label" for="martechOffers">\n\t\t\t\t\t<span class="martech-one-tap-modal__checkbox-check"></span>\n\t\t\t\t\t<span class="martech-one-tap-modal__copy-small martech-one-tap-modal__checkbox-text">').concat(o.stepOne.marketing,'</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<button class="martech-one-tap-modal__form-button">').concat(o.stepOne.buttonText,"</button>\n\t\t</form>")},u=function(e){return'\n\t\t<img class="martech-one-tap-modal__final-img" src="'.concat((t="Activities/TGT-256--google-one-tap-library",n="subscription-complete.gif",r=a.a.domain,s=t.replace("Activities/",""),"".concat(r,"images/").concat(s,"/").concat(n)),'" alt="Illustrated newspaper jumping in the air" />\n\t\t<h2 class="martech-one-tap-modal__heading martech-one-tap-modal__heading--center').concat("united kingdom"!==e?" martech-one-tap-modal__heading--full-width":"",'">').concat(o.stepTwo.heading(e),'</h2>\n\t\t<p class="martech-one-tap-modal__message martech-one-tap-modal__message--center">').concat(o.stepTwo.message(e),"</p>\n\t");var t,n,r,s},d=function(e){var t="";return e.forEach((function(e){t+=p(e)})),t},p=function(e){return'\n\t\t<article class="martech-one-tap-modal__newsletter-card">\n\t\t\t<img class="martech-one-tap-modal__newsletter-card-img" src="'.concat(e.img,'">\n\t\t\t<div class="martech-one-tap-modal__newsletter-card-info">\n\t\t\t\t<header class="martech-one-tap-modal__newsletter-card-header">\n\t\t\t\t\t<div class="martech-one-tap-modal__newsletter-card-headings">\n\t\t\t\t\t\t<h3 class="martech-one-tap-modal__newsletter-card-sub-heading martech-one-tap-modal--no-margin">').concat(e.frequency,'</h3>\n\t\t\t\t\t\t<h2 class="martech-one-tap-modal__newsletter-card-heading martech-one-tap-modal--no-margin">').concat(e.title,'</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class="martech-one-tap-modal__newsletter-card-button" data-newsletter-id="').concat(e.api.newsletterId,'" data-newsletter-name="').concat(e.name,'" aria-label="').concat(e.name,' newsletter sign up">\n\t\t\t\t\t\t<span class="martech-one-tap-modal__newsletter-card-button-icon-container">').concat(Object(r.a)("martech-one-tap-modal__newsletter-card-button-icon"),'</span>\n\t\t\t\t\t</button>\n\t\t\t\t</header>\n\t\t\t\t<p class="martech-one-tap-modal__newsletter-card-copy martech-one-tap-modal--no-margin">').concat(e.descLoggedIn,"</p>\n\t\t\t</div>\n\t\t</article>")},g=function(){return'\n\t\t<div class="martech-one-tap-modal__loading-spinner-container">\n\t\t\t<div class="martech-one-tap-modal__loading-spinner-center">\n\t\t\t\t<svg class="martech-one-tap-modal__loading-spinner-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70.4 79.2"><path d="M4.9 47.8c0-13.2 10.2-22.3 19.7-26.4l.6.8a20.5 20.5 0 0 0-5.9 15.7c0 9.2 2.5 15.5 6.3 19.6 1.3-1.4 2-3.7 2-5.6V38.3l17.2-12 .7.9c-1.5 2.1-2.3 4-2.3 7.3v8.8c0 6.1-10.2 12.7-16.7 15.2 4.2 4 10.1 5.7 16.5 5.7 2.3 0 4.4-.1 6.3-.4V25.5c-5.6-.3-10.9-1.8-15.7-3.1a57 57 0 0 0-15-2.8c-6.9 0-15.3 2.3-15.4 12.1l.2 2.9-1.3.4A22.4 22.4 0 0 1 23.7 3.7c6 0 11.7 1.5 16.8 2.8a60 60 0 0 0 16 2.9c2.7 0 4.3-1.4 4.3-3.9s-1.3-3.8-3.4-4.3l.2-1.2c6.1 1.1 13 4.6 13 12.2 0 9.2-6.7 13.5-18.2 13.5h-1.2v37.9a22.7 22.7 0 0 0 16.2-10.7l1.2.6c-4.2 13-14 25.2-31.5 25.2-17.7.1-32.2-10-32.2-30.9zM52.3 21c-12.8 0-24.2-6.1-33.5-6.1-6 0-12.8 2.4-15.3 9.1l.4.2c2.8-4.6 9.2-6.1 14.9-6.1 9.3 0 20.7 6.1 33.4 6.1 10.2 0 16.1-3.4 17.2-11.4l-.5-.1c-1.5 6.1-6.4 8.3-16.6 8.3zm-36.5 7.6a27 27 0 0 0-9.2 19.2C6.6 67.3 20.1 77 36.9 77a32 32 0 0 0 22.3-9.8l-.3-.4c-5 3.9-11.7 7.1-22 7.1-13.6 0-26.9-8.2-26.9-26.1A33 33 0 0 1 16.1 29l-.3-.4zm16.9 22.5l-.1-14.4-3.3 2.2v13.4c0 1.5-.3 2.6-.7 3.7h.4c2-1.2 3.7-3.2 3.7-4.9z"></path></svg>\n\t\t\t</div>\n\t\t\t<div class="martech-one-tap-modal__loading-spinner-item-container-1">\n\t\t\t\t<div class="martech-one-tap-modal__loading-spinner-item martech-one-tap-modal__loading-spinner">\n\t\t\t\t\t<div class="martech-one-tap-modal__loading-spinner-scale"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="martech-one-tap-modal__loading-spinner-item-container-2">\n\t\t\t\t<div class="martech-one-tap-modal__loading-spinner-item martech-one-tap-modal__loading-spinner">\n\t\t\t\t\t<div class="martech-one-tap-modal__loading-spinner-scale"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>'}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return new Promise((function(t){var n=document.querySelector(e);if(n)t(n);else{var r=new MutationObserver((function(n){n.forEach((function(n){for(var a=0,o=Array.from(n.addedNodes);a<o.length;a++){var s=o[a],i=s.innerHTML||!1;if(s.matches&&s.matches(e))return r.disconnect(),void t(s);if(i&&s.querySelector(e))return r.disconnect(),void t(s.querySelector(e))}}))}));r.observe(document.documentElement,{childList:!0,subtree:!0})}}))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(0),a=n(18),o=n(10),s=n(1),i=Object(o.a)(),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.a.get("tmg_refresh");return new Promise((function(n){var a={grant_type:"refresh_token",refresh_token:t,client_id:"tcuk"};fetch(i.apis.identityTokens.url,{method:"POST",body:JSON.stringify(a),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then(d).then((function(e){return e.json()})).then((function(e){return n(e)})).catch((function(t){return Object(r.a)("Issue when getting ID token: ".concat(t," at ").concat(e))}))}))},l=function(t,n){return new Promise((function(a){fetch(i.apis.newslettersMe.url,{method:"GET",headers:p(t,n,"access-user")}).then(d).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(t){return Object(r.a)("Issue when accessing user: ".concat(t," at ").concat(e))}))}))},u=function(t,n,a,o){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{success:"success",error:"error"},l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return new Promise((function(u){fetch("".concat(i.apis.newslettersMe.url,"/").concat(o),{method:"POST",headers:p(n,a,"submit-newsletter")}).then(d).then((function(){l&&(window.dataLayer.newsLetterType=o,window.dataLayer.event=["newsletterSignup"],window.dataLayer.target={evar75:"".concat(t.campaignId,"_").concat(t.campaignName,"_").concat(o,"-sign-up-success")}),u(c.success)})).catch((function(n){Object(r.a)("Martech:: Issue when submitting newsletter: ".concat(n," at ").concat(e)),Object(s.d)("".concat(o,"-sign-up-error"),t),u(c.error)}))}))},d=function(e){return 200===e.status||201===e.status?Promise.resolve(e):Promise.reject(new Error(e.statusText))},p=function(e,t,n){var r={"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json",access_token:e.access_token,id_token:e.id_token,ddgFlow:t,ddgAction:n};return new Headers(r)}}).call(this,"Utilities/newsletters-api")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"<svg ".concat(e?'class="'.concat(e,'"'):"",' viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<path d="M16 1L15 0L8 7L1 0L0 1L7 8L0 15L1 16L8 9L15 16L16 15L9 8L16 1Z"/>\n\t\t</svg>')}},function(e,t,n){"use strict";var r=n(7),a=n.n(r),o={prod:{env:"prod",domain:"https://www.telegraph.co.uk",apis:{genericreg:{url:"https://api.telegraph.co.uk/commerce/accounts/genericreg"},identityTokens:{url:"https://api.telegraph.co.uk/identity/tokens",timeout:5e3,method:"POST",body:{grant_type:"refresh_token",client_id:"tcuk"},headers:{"Content-Type":"application/json",Accept:"application/json"},store:{label:"identityTokens",expire:10,encrypt:!1}},pidStatus:{url:"https://api.telegraph.co.uk/commerce/accounts/{{pid}}/status"},newslettersMe:{url:"https://api.telegraph.co.uk/commerce/newsletters/me",timeout:5e3,method:"GET",headers:{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json"},store:{label:"newsletterMe",expire:10,encrypt:!0}},smsMessage:{url:"https://api.telegraph.co.uk/commerce/subscriptions/me/sms"},report:{url:"http://api.telegraph.co.uk/martech/"},accountsMe:{url:"https://api.telegraph.co.uk/commerce/accounts/me",timeout:3e3,method:"GET",headers:{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json"}},googleSubscribeOrder:{url:"https://api.telegraph.co.uk/commerce/orders/google",method:"POST"}},scripts:{onetap:"https://www.telegraph.co.uk/customer/lib/onetap.js",tmguser:"https://secure.telegraph.co.uk/customer/lib/tmguser.js",tmgdecrypt:"https://secure.telegraph.co.uk/customer/lib/tmgdecrypt.js",pianoLibrary:"https://experience.tinypass.com/xbuilder/experience/load?aid=NJu5KnOFpu",applepay:"https://secure.telegraph.co.uk/customer/lib/tmgapplepay.js"}},staging:{env:"staging",domain:"https://staging-ams64.telegraph.co.uk",apis:{genericreg:{url:"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/accounts/genericreg"},identityTokens:{url:"https://api-preprod.telegraph.co.uk/identity-api-qa/identity/tokens",timeout:5e3,method:"POST",body:{grant_type:"refresh_token",client_id:"tcuk"},headers:{"Content-Type":"application/json",Accept:"application/json"},store:{label:"identityTokens",expire:10,encrypt:!1}},pidStatus:{url:"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/accounts/{{pid}}/status"},newslettersMe:{url:"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/newsletters/me",timeout:5e3,method:"GET",headers:{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json"}},smsMessage:{url:"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/subscriptions/me/sms"},report:{url:"http://api.telegraph.co.uk/martech/"},accountsMe:{url:"https://api-preprod.telegraph.co.uk/commerce/accounts/me",timeout:3e3,method:"GET",headers:{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json"}},googleSubscribeOrder:{url:"https://api-preprod.telegraph.co.uk/commerce-api-qa/commerce/orders/google",method:"POST"}},scripts:{onetap:"https://secure-staging-ams64.telegraph.co.uk/customer/lib/onetap.js",tmguser:"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmguser.js",tmgdecrypt:"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmgdecrypt.js",pianoLibrary:"https://sandbox.tinypass.com/xbuilder/experience/load?aid=AdcpxkpRsu",applepay:"https://secure-staging-ams64.telegraph.co.uk/customer/lib/tmgapplepay.js"}},qa:{env:"qa",domain:"https://{{env}}.telegraph.co.uk",apis:{genericreg:{url:"https://api.telegraph.co.uk/commerce/accounts/genericreg"},identityTokens:{url:"https://api-preprod.telegraph.co.uk/identity-api-uat/identity/tokens",timeout:2e3,method:"POST",body:{grant_type:"refresh_token",client_id:"tcuk"},headers:{"Content-Type":"application/json",Accept:"application/json"},store:{label:"identityTokens",expire:10,encrypt:!1}},pidStatus:{url:"https://api.telegraph.co.uk/commerce/accounts/{{pid}}/status"},newslettersMe:{url:"https://api-preprod.telegraph.co.uk/commerce-api-uat/commerce/newsletters/me",timeout:5e3,method:"GET",headers:{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json"}},smsMessage:{url:"https://api.telegraph.co.uk/commerce/subscriptions/me/sms"},report:{url:"http://api.telegraph.co.uk/martech/"},accountsMe:{url:"https://api.telegraph.co.uk/commerce/accounts/me",timeout:3e3,method:"GET",headers:{"Access-Control-Request-Headers":"application/json","Content-Type":"application/json",Accept:"application/json"}},googleSubscribeOrder:{url:"https://api-preprod.telegraph.co.uk/commerce-api-uat/commerce/orders/google",method:"POST"}},scripts:{onetap:"https://www.telegraph.co.uk/customer/lib/onetap.js",tmguser:"https://secure.telegraph.co.uk/customer/lib/tmguser.js",tmgdecrypt:"https://secure.telegraph.co.uk/customer/lib/tmgdecrypt.js",pianoLibrary:"https://sandbox.tinypass.com/xbuilder/experience/load?aid=nXCLFFIWmQ",applepay:"https://qa6.telegraph.co.uk/customer/lib/tmgapplepay.js"}}},s=function(e){var t={};for(var n in o)n===e?t=o[e]:e.includes("qa")&&(t=o.qa);return 0===Object.keys(t).length&&t.constructor===Object&&(t=o.prod),function e(t,n){var r={};for(var o in t)if(Array.isArray(t[o]))for(var s in r[o]=[],t[o])"string"==typeof t[o][s]&&r[o].push(t[o][s].replace("{{env}}",n)),r[o].push(t[o][s]);else"object"===a()(t[o])?r[o]=e(t[o]):"string"==typeof t[o]?r[o]=t[o].replace("{{env}}",n):r[o]=t[o];return r}(t,e)};t.a=function(){var e=window.location.hostname.split(".");if(e.some((function(e){return/(^|-)qa[0-9]+$/i.test(e)}))){var t=e.filter((function(e){return/(^|-)qa[0-9]+$/i.test(e)}))[0];return s(t)}return e.some((function(e){return/(^|-)(staging|ci)(.*)$/i.test(e)}))?s("staging"):s("prod")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r={excluded:["chase.telegraph.co.uk"],dev:"https://dev-martech.platforms-preprod-gcp.telegraph.co.uk/martech/",preprod:"https://martech.platforms-preprod-gcp.telegraph.co.uk/martech/",prod:"https://www.telegraph.co.uk/martech/",local:{secure:"https://localhost:3002/martech/",unsecure:"http://localhost:3001/martech/"}},a=function(){return!!g()},o=function(){return!!d()},s=function(){return!!p()},i=function(){return r.excluded.includes(document.location.host)},c=function(){return!(!window.tmg||!window.tmg.fbnBypass)},l=function(){return!!(window.console&&window.console.log&&/martech_disable=(1|true)/i.test(location.search))},u=function(){for(var e=location.search.replace("?","").split("&"),t=0;t<e.length;t++){var n=e[t].split("=");if("martech_turnoff"===n[0])return n[1].split(",")}return!1},d=function(){return!!(window.console&&window.console.log&&/martech_dev=(1|true)/i.test(location.search))},p=function(){return!!(window.console&&window.console.log&&/martech_preprod=(1|true)/i.test(location.search))},g=function(){return!!(window.console&&window.console.log&&/martech_local=(1|true)/i.test(location.search))},h=function(){return!1},m=function(){return window.console&&window.console.log&&/martech_debug=(1|true)/i.test(location.search)},f={env:"prod",domain:r.prod,flags:{debug:m()||h(),disabled:!!(l()||i()||c()),prod:!(s()||o()||a()),preprod:s(),dev:o(),local:a(),turnoff:u()||!1,overrides:function(){for(var e={group_control:!1,group_variation:!1},t=location.search.replace("?","").split("&"),n=0;n<t.length;n++){var r=t[n].split("=");"martech_splitgroup_control"===r[0]&&(e.group_control=r[1]),"martech_splitgroup_variation"===r[0]&&(e.group_variation=r[1])}return e}()}}},function(e){e.exports=JSON.parse('[{"name":"matt","audiences":{"keywords":["matt","matt pritchett","cartoons"]},"subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-231-newsletter-matt/matt-newsletter.png","title":"Matt Newsletter","frequency":"Weekly","descLoggedIn":"Enjoy even more of your favourite cartoonist","descLoggedOut":"Enjoy even more of your favourite cartoonist","successMsg":"Your first Matt newsletter will arrive in your inbox soon.","api":{"newsletterId":"Matt_NL","channel":"On-page_NL"}},{"name":"politics-headlines","audiences":{"channel":"politics"},"recs":"politics","subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-506-politics-headlines/politics_headline.png","title":"Politics Headlines","frequency":"Daily","descLoggedIn":"Your personal political briefing, delivered to your inbox every day","descLoggedOut":"Your personal political briefing, delivered to your inbox every day","successMsg":"Your Politics Headlines Newsletter will arrive in your inbox soon.","api":{"newsletterId":"PoliticsHeadlines_NL","channel":"On-page_NL"}},{"name":"beyond-brexit-bulletin","audiences":{"keywords":"brexit","author":["james crisp","dia chakravarty"]},"recs":"politics","subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-188-newsletter-beyond-brexit/beyond-brexit-bulletin.png","title":"Beyond Brexit Bulletin","frequency":"Two times a week","descLoggedIn":"Expert insight into the future of global Britain","descLoggedOut":"Expert insight into the future of global Britain","successMsg":"Your Beyond Brexit Bulletin Newsletter will arrive in your inbox soon.","api":{"newsletterId":"Politics_NL","channel":"On-page_NL"}},{"name":"dispatches","audiences":{"channel":"world-news","keywords":["ukraine","russia-ukraine war","ukraine refugees","russian invasion","vladimir putin","kyiv","usa","europe","middle east","asia","australasia","africa","latin america"],"author":["colin freeman","dominic nicholls","roland oliphant","ben farmer","andriy kononenko"]},"recs":"politics","subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-1162-newsletter-dispatches/dispatches-nl.png","title":"Dispatches Newsletter","frequency":"Daily","descLoggedIn":"Our foreign correspondents bring you the stories that matter - from Ukraine and around the world.","descLoggedOut":"Our foreign correspondents bring you the stories that matter - from Ukraine and around the world.","successMsg":"Your first Dispatches newsletter will arrive in your inbox soon.","api":{"newsletterId":"Dispatches_NL","channel":"On-page_NL"}},{"name":"choppers-politics-newsletters","audiences":{"channel":"politics","author":["daniel capurro","christopher hope"]},"recs":"politics","subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-588-newsletter-choppers-politics/choppers-politics.png","title":"Chopper\'s Politics Newsletter","frequency":"Mon - Fri","descLoggedIn":"Our essential daily morning political digest","descLoggedOut":"Our essential daily morning political digest","successMsg":"Your first Chopper\'s Politics Newsletter will arrive in your inbox soon.","api":{"newsletterId":"PoliticsFrontBench_NL","channel":"On-page_NL"}},{"name":"economic-intel","audiences":{"author":["ambrose evans-pritchard","jeremy warner"]},"recs":["business","property","money","investing","tax","personal-banking","insurance"],"subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-108--newsletters-v2/economic-intel.png","title":"Economic Intelligence","frequency":"Weekly","descLoggedIn":"Expert economic analysis, every Tuesday","descLoggedOut":"Expert economic analysis, every Tuesday","successMsg":"Your first Economic Intelligence Newsletter will arrive in your inbox soon","api":{"newsletterId":"EconomicIntel_NL","channel":"On-page_NL"}},{"name":"money","audiences":{"channel":["money","tax","personal-banking","insurance","property"],"author":"marianna hunt"},"recs":["business","property","money","investing","tax","personal-banking","insurance"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1590-newsletter-money/money.png","title":"Money newsletter","frequency":"Weekly","descLoggedIn":"Personal finance news, analysis and advice","descLoggedOut":"Personal finance news, analysis and advice","successMsg":"Your first Money newsletter will arrive in your inbox soon.","api":{"newsletterId":"Personal_Finance_NL","channel":"On-page_NL"}},{"name":"investor","audiences":{"channel":"investing","author":["sam benstead","jonathan jones"]},"recs":["business","property","money","investing","tax","personal-banking","insurance"],"subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-231-newsletter-investor/investor.jpg","title":"Investor newsletter","frequency":"Weekly","descLoggedIn":"Expert investment analysis, advice and opinion","descLoggedOut":"Expert investment analysis, advice and opinion","successMsg":"Your first Investor newsletter will arrive in your inbox soon.","api":{"newsletterId":"Investor_NL","channel":"On-page_NL"}},{"name":"business-briefing","audiences":{"channel":"business"},"recs":["business","property","money","investing","tax","personal-banking","insurance"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1814-newsletter-business/business-briefing.png","title":"Business Briefing newsletter","frequency":"Mon - Fri and Sunday","descLoggedIn":"Our daily digest packed with news and analysis","descLoggedOut":"Our daily digest packed with news and analysis","successMsg":"Your first Business Briefing newsletter will arrive in your inbox soon.","api":{"newsletterId":"Citydesk_NL","channel":"On-page_NL"}},{"name":"rugby","audiences":{"channel":["rugby-union","rugby-league","rugby-world-cup","rugby-sevens"]},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-31-newsletter-spike/rugby-nerd.png","title":"Rugby Newsletter","frequency":"Weekly","descLoggedIn":"The key talking points from the week\'s games","descLoggedOut":"The key talking points from the week\'s games","successMsg":"Your first Rugby Newsletter will arrive in your inbox soon.","api":{"newsletterId":"RugbyNerd_NL","channel":"On-page_NL"}},{"name":"cookbook","audiences":{"channel":["food-and-drink","foodanddrink","recipes","lifestyle","health-fitness"],"author":"amy bryant","keywords":["restaurants","pubs","recipe","recipes","food and drink","food and drink editor\'s choice","food and drink editors choice"]},"audiencesJoin":["channel","keywords"],"recs":["family","food-and-drink","foodanddrink","gardening","health-fitness"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-2050-newsletter-cookbook/food-and-drink.png","title":"Telegraph Cookbook Newsletter","frequency":"Mon - Fri","descLoggedIn":"A feast of ideas from our renowned recipe site","descLoggedOut":"A feast of ideas from our renowned recipe site","successMsg":"Your first Cookbook Newsletter will arrive in your inbox soon.","api":{"newsletterId":"FoodDrink_NL","channel":"On-page_NL"}},{"name":"technology-intelligence","audiences":{"channel":"technology","author":["robin pagnamenta","james titcomb"]},"subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/cus-1960-newsletter-technology/technology-intelligence.png","title":"Technology Intelligence newsletter","frequency":"Mon - Fri","descLoggedIn":"Your essential guide to technology today","descLoggedOut":"Your essential guide to technology today","successMsg":"Your first Technology Intelligence newsletter will arrive in your inbox soon.","api":{"newsletterId":"Technology_NL","channel":"On-page_NL"}},{"name":"snow-ski","audiences":{"channel":"travel","keywords":["ski","snowboard"]},"audiencesJoin":["channel","keywords"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-108--newsletters-v2/ski-snow.png","title":"Ski & Snow","frequency":"Weekly (Seasonal)","descLoggedIn":"Trending destinations, resort guides and news","descLoggedOut":"Trending destinations, resort guides and news","successMsg":"Your first Ski & Snow newsletter will arrive in your inbox soon.","api":{"newsletterId":"Snow_and_Ski_NL","channel":"On-page_NL"}},{"name":"travel","audiences":{"channel":"travel"},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1811-newsletter-travel/travel.png","title":"Travel Newsletter","frequency":"Twice Weekly","descLoggedIn":"Destination guides and expert travel advice","descLoggedOut":"Destination guides and expert travel advice","successMsg":"Your first Travel newsletter will arrive in your inbox soon.","api":{"newsletterId":"Travel_NL","channel":"On-page_NL"}},{"name":"gardening","audiences":{"channel":"gardening","author":"joanna fortnam"},"recs":["family","food-and-drink","foodanddrink","gardening","health-fitness"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1798-newsletter-gardening/gardening.png","title":"Telegraph Gardening","frequency":"Weekly","descLoggedIn":"Practical tips and features from our experts","descLoggedOut":"Practical tips and features from our experts","successMsg":"Your first Telegraph Gardening newsletter will arrive in your inbox soon.","api":{"newsletterId":"Gardening_NL","channel":"On-page_NL"}},{"name":"stella","audiences":{"keywords":"stella magazine"},"recs":["fashion","beauty","lifestyle"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-1604--newsletter-lifestyle/lifestyle-nl.jpg","title":"The Telegraph Lifestyle Newsletter","frequency":"Daily","descLoggedIn":"Your daily slice of Telegraph fashion, beauty, lifestyle and features","descLoggedOut":"Your daily slice of Telegraph fashion, beauty, lifestyle and features","successMsg":"Your first Telegraph Lifestyle Newsletter will arrive in your inbox soon.","api":{"newsletterId":"Stella_NL","channel":"On-page_NL"}},{"name":"formula-1","audiences":{"author":["luke slater"],"channel":["formula-1"],"keywords":["formula one","grand prix","mercedes","ferrari","lewis hamilton","max verstappen"]},"subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-1017-f1-newsletter/f1.png","title":"Formula One Newsletter","frequency":"Weekly","descLoggedIn":"The perfect recap after every race weekend","descLoggedOut":"The perfect recap after every race weekend","successMsg":"Your first Formula One newsletter will arrive in your inbox soon.","api":{"newsletterId":"FormulaOne_NL","channel":"On-page_NL"}},{"name":"sport-briefing","audiences":{"channel":["sport","womens-sport","womens sport","womens-football","athletics","cycling","swimming","olympics","gymnastics","paralympic-sport","formula-1"],"keywords":"women\'s sport","pageURL":"world-cup/2022-predictor-wallchart-football-qatar"},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/TGT-387-newsletter-sport-briefing/sport.png","title":"The Sports Briefing Newsletter","frequency":"Mon - Fri","descLoggedIn":"You\'ll receive the best of our sport coverage - every weekday morning","descLoggedOut":"You\'ll receive the best of our sport coverage - every weekday morning","successMsg":"Your first Sport Briefing Newsletter will arrive in your inbox soon.","api":{"newsletterId":"PREMIUM_SPORTS_NL","channel":"On-page_NL"}},{"name":"football","audiences":{"channel":"football","author":"daniel zequiri","pageURL":"world-cup/2022-predictor-wallchart-football-qatar"},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1797-newsletter-football/football-nerd.png","title":"Football Newsletter","frequency":"Weekly (Seasonal)","descLoggedIn":"The best analysis of the biggest games, delivered weekly during the season, daily during the World Cup","descLoggedOut":"The best analysis of the biggest games, delivered weekly during the season, daily during the World Cup","successMsg":"Your first Football Nerd newsletter will arrive in your inbox soon.","api":{"newsletterId":"Football_NL","channel":"On-page_NL"}},{"name":"cricket","audiences":{"channel":"cricket","author":["michael vaughan","phil tufnell"]},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-1160--newsletter-cricket-club/cricket-club.png","title":"Vaughany & Tuffers Cricket Club Newsletter","frequency":"Weekly (Seasonal)","descLoggedIn":"Everything from interviews with ECB bigwigs to chats with village viral sensations","descLoggedOut":"Everything from interviews with ECB bigwigs to chats with village viral sensations","successMsg":"Your first Vaughany & Tuffers Cricket Club Newsletter will arrive in your inbox soon.","api":{"newsletterId":"CricketNerd_NL","channel":"On-page_NL"}},{"name":"talking-tv","audiences":{"keywords":["television","line of duty"],"author":"michael hogan"},"recs":["culture","tv","films","music","books","art","theatre","film","comedy","radio"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-201-newsletter-talking-tv/talking-tv.png","title":"Talking TV Newsletter","frequency":"Weekly","descLoggedIn":"Our guide to the week\'s top shows, every Monday","descLoggedOut":"Our guide to the week\'s top shows, every Monday","successMsg":"Your first Talking TV newsletter will arrive in your inbox soon.","api":{"newsletterId":"TalkingTV_NL","channel":"On-page_NL"}},{"name":"film","audiences":{"channel":["film","films"],"author":"robbie collin"},"recs":["culture","tv","films","music","books","art","theatre","film","comedy","radio"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1796-newsletter-film/film.png","title":"The Film newsletter","frequency":"Weekly","descLoggedIn":"Reviews, news, and Robbie Collin\'s week in film","descLoggedOut":"Reviews, news, and Robbie Collin\'s week in film","successMsg":"Your first Film newsletter will arrive in your inbox soon.","api":{"newsletterId":"Film_NL","channel":"On-page_NL"}},{"name":"culture-headlines","audiences":{"channel":["culture","tv","music","books","on-demand","theatre","art","radio","comedy","opera","dance","photography","better","film","films"]},"recs":["culture","tv","films","music","books","art","theatre","film","comedy","radio"],"subscriberOnly":false,"generic":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-424-headlines-culture/culture-headlines.png","title":"Culture Headlines","frequency":"Weekly","descLoggedIn":"Your personal arts and entertainment briefing","descLoggedOut":"Your personal arts and entertainment briefing","successMsg":"Your first culture newsletter will arrive in your inbox soon.","api":{"newsletterId":"CultureHeadlines_NL","channel":"On-page_NL"}},{"name":"culture","audiences":{"channel":["culture","tv","music","books","on-demand","theatre","art","radio","comedy","opera","dance","photography","better","film","films"],"author":"tristram saunders"},"recs":["culture","tv","films","music","books","art","theatre","film","comedy","radio"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1808-newsletter-culture/culture.png","title":"Culture newsletter","frequency":"Weekly","descLoggedIn":"The latest art, theatre, book and music reviews","descLoggedOut":"The latest art, theatre, book and music reviews","successMsg":"Your first Culture Headlines Newsletter will arrive in your inbox soon.","api":{"newsletterId":"Culture_NL","channel":"On-page_NL"}},{"name":"royals","audiences":{"channel":"royal-family","keywords":["royal family","the royal family"],"author":"camilla tominey"},"subscriberOnly":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-229-newsletter-royal/royal.png","title":"Your Royal Appointment","frequency":"Weekly","descLoggedIn":"Your essential weekly guide to all things Royal","descLoggedOut":"Your essential weekly guide to all things Royal","successMsg":"Your first Royal Appointment newsletter will arrive in your inbox soon.","api":{"newsletterId":"Royal_NL","channel":"On-page_NL"}},{"name":"news-headlines","audiences":{"channel":["news","royal-family","science","education-and-careers","education","global-health","environment"],"keywords":["world news","uk news","royal family","the royal family"]},"subscriberOnly":false,"generic":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-503-newsletter-news-headlines/news-headlines.png","title":"News Headlines","frequency":"Weekly","descLoggedIn":"News stories personally picked just for you","descLoggedOut":"News stories personally picked just for you","successMsg":"Your first News Headlines newsletter will arrive in your inbox soon.","api":{"newsletterId":"NewsHeadlines_NL","channel":"On-page_NL"}},{"name":"breaking-news","audiences":{"channel":"news"},"recs":"politics","subscriberOnly":false,"generic":true,"img":"https://static.telegraph.co.uk/aem/martech/TGT-241-newsletter-breaking-news/breaking-news.png","title":"Telegraph Breaking News alerts","frequency":"Regular updates","descLoggedIn":"The biggest news stories, as they happen","descLoggedOut":"The biggest news stories, as they happen","successMsg":"Your first Telegraph Breaking News Newsletter will arrive in your inbox soon.","api":{"newsletterId":"BreakingNews_NL","channel":"On-page_NL"}},{"name":"good-news","audiences":{"keywords":["you are not alone","coronavirus positive","happiness","gratitude"],"author":"sarah ebner"},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-365-newsletter-good-news/good-news.png","title":"Good News Newsletter","frequency":"Twice Weekly","descLoggedIn":"A weekly email guaranteed to brighten your day","descLoggedOut":"A weekly email guaranteed to brighten your day","successMsg":"Your first Good news newsletter will arrive in your inbox soon.","api":{"newsletterId":"YouAreNotAlone_NL","channel":"On-page_NL"}},{"name":"cars","audiences":{"channel":"cars","author":"paul hudson"},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1809-newsletter-cars/cars.png","title":"Cars Newsletter","frequency":"Weekly","descLoggedIn":"Your essential weekly motoring digest","descLoggedOut":"Your essential weekly motoring digest","successMsg":"Your first Cars newsletter will arrive in your inbox soon.","api":{"newsletterId":"Motoring_NL","channel":"On-page_NL"}},{"name":"parenting","audiences":{"channel":"family","author":"paul davies","keywords":"parenthood"},"recs":["family","food-and-drink","foodanddrink","gardening","health-fitness"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1799-newsletter-parenting/parenting.png","title":"Telegraph Parenting","frequency":"Weekly","descLoggedIn":"Your essential survival guide for family life","descLoggedOut":"Your essential survival guide for family life","successMsg":"Your first Telegraph Parenting newsletter will arrive in your inbox soon.","api":{"newsletterId":"Family_NL","channel":"On-page_NL"}},{"name":"health","audiences":{"channel":["global-health","news"],"author":["paul nuki","anne gulland","sarah newey"],"keywords":"coronavirus"},"audiencesJoin":["channel","keywords"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/cus-1747-newsletter-health/health.png","title":"Global Health Bulletin","frequency":"Mon - Fri","descLoggedIn":"The latest coronavirus news and advice, daily","descLoggedOut":"The latest coronavirus news and advice, daily","successMsg":"Your first global health security newsletter will arrive in your inbox soon.","api":{"newsletterId":"HealthSecurity_NL","channel":"On-page_NL"}},{"name":"frontpage","audiences":{"channel":["news","science","education-and-careers","education"],"keywords":"uk news"},"audiencesJoin":["channel","keywords"],"subscriberOnly":false,"generic":true,"img":"https://static.telegraph.co.uk/aem/martech/tgt-93-newsletter/Frontpage_NL.png","title":"Front Page Newsletter","frequency":"Twice Daily","descLoggedIn":"Your essential morning and evening briefing","descLoggedOut":"Your essential morning and evening briefing","successMsg":"Your first Front Page newsletter will arrive in your inbox soon.","api":{"newsletterId":"Frontpage_NL","channel":"On-page_NL"}},{"name":"puzzles","audiences":{"keywords":["puzzles news","brain health","brainpower"]},"recs":["family","food-and-drink","foodanddrink","gardening","health-fitness"],"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/TGT-285--updates-to-live-newsletter-signups/puzzles.png","title":"Puzzles","frequency":"Weekly","descLoggedIn":"Tips and tricks from our crossword compilers","descLoggedOut":"Tips and tricks from our crossword compilers","successMsg":"Your first Puzzles newsletter will arrive in your inbox soon.","api":{"newsletterId":"Puzzles_NL","channel":"On-page_NL"}},{"name":"vouchers","audiences":{"channel":["black-friday","black friday"]},"subscriberOnly":false,"img":"https://static.telegraph.co.uk/aem/martech/tgt-741-voucher-newsletter/voucher.png","title":"Vouchers","frequency":"Weekly","descLoggedIn":"Our top voucher codes and deals from a wide range of specially selected advertisers.","descLoggedOut":"Our top voucher codes and deals from a wide range of specially selected advertisers.","successMsg":"Your first Vouchers newsletter will arrive in your inbox soon.","api":{"newsletterId":"Promotions_NL","channel":"On-page_NL"}}]')},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var r=n(20),a=n.n(r),o=n(7),s=n.n(o),i=n(12),c=n(0),l=n(8);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=[];return e&&e.forEach((function(e){var n=i.filter((function(t){return e===t.api.newsletterId}))[0];n&&t.push(n)})),t},g=function(t,n){return new Promise((function(r,a){var o=["BreakingNews_NL"],s=y(o,t);o.unshift(t.businSegment&&"sport"===t.businSegment.toLowerCase()?"PREMIUM_SPORTS_NL":"Frontpage_NL"),s?(o.unshift(s),r(o)):Object(l.c)(n).then((function(e){o.unshift(h(e,o)),r(o)})).catch((function(t){Object(c.a)("Issue getting the top priority newsletter at ".concat(e),t),a(t)}))}))},h=function(e,t){var n=e.newsletters;if(n){var r=m(n);return r&&t?f(r,t):"CultureHeadlines_NL"}return"CultureHeadlines_NL"},m=function(e){return e.filter((function(e){return e.priority>=1})).sort((function(e,t){return e.priority-t.priority}))},f=function(e,t){for(var n=function(n){var r=e[n],a=i.filter((function(e){return r.id===e.api.newsletterId}));if(!t.includes(r.id)&&a.length>0)return{v:r.id}},r=0;r<e.length;r++){var a=n(r);if("object"===s()(a))return a.v}},y=function(e,t){var n=i.filter((function(e){return!e.subscriberOnly})),r=n.filter((function(n){return n.recs&&n.recs.includes(t.channel)&&!e.includes(n.api.newsletterId)})),a=n.filter((function(t){return!r.includes(t)&&!e.includes(t.api.newsletterId)}));if(["story","live","video","gallery"].includes(t.contentType)&&r.length>0&&!v(r,t))return b(e);var o,s=u(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(w(c,t))return c.api.newsletterId}}catch(e){s.e(e)}finally{s.f()}var l,d=u(a);try{for(d.s();!(l=d.n()).done;){var p=l.value;if(w(p,t))return p.api.newsletterId}}catch(e){d.e(e)}finally{d.f()}},b=function(e){window.tmg.pubsub.subscribe({topic:"tmg.martech.newsletter.recs.ready",func:function(){return k(e)},runIfAlreadyPublished:!0})},v=function(e,t){return e.length&&e.some((function(e){return w(e,t)}))},w=function(e,t){if(e.audiences)for(var n=0,r=Object.entries(e.audiences);n<r.length;n++){var o=a()(r[n],1)[0],s=L(e,o,!1,t)&&x(e,o)&&O(e,t),i=L(e,o,!1,t)&&!x(e,o);if(s||i)return!0}},k=function(e){var t,n=u(window.dataLayer.martech.recommendedNLs);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!e.includes(r))return r}}catch(e){n.e(e)}finally{n.f()}},_=function(e){return!e.audiencesJoin.filter((function(e){return Array.isArray(e)}))[0]},O=function(e,t){var n=function(n){return n.every((function(n){return L(e,n,!1,t)}))};return _(e)?n(e.audiencesJoin):e.audiencesJoin.some(n)},L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=n||e.audiences[t];return Array.isArray(a)?!!a.filter((function(e){return r[t].includes(e)}))[0]:r[t].includes(a)},x=function(e,t){if(e.audiencesJoin){var n=function(e){return e.some((function(e){return e===t}))};return _(e)?n(e.audiencesJoin):e.audiencesJoin.some(n)}}}).call(this,"Activities/TGT-256--google-one-tap-library/_partials")},function(e,t,n){"use strict";window.martech=window.martech||{};t.a={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=martech,r=e.split(".");return"martech"===r[0]&&(r=r.slice(1)),r.forEach((function(e,a){void 0===n[e]&&(n[e]=Object.is(r.length-1,a)&&t?t:{}),n=n[e]})),n}catch(t){console.warn("Couldn't create namespace:",e)}}}},function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){e&&(Object(o.a)("INIT: Activity: ".concat(e.campaignName," | Activity ID: ").concat(e.campaignId," | Experience Number: [").concat(e.experienceNumber,"] | Experience Name: ").concat(e.experienceName)),window.martech.info=window.martech.info||{},window.martech.info.activitiesRunning=window.martech.info.activitiesRunning||[],window.martech.info.activitiesRunning.push({id:e.campaignId,campaignClass:e.campaignClass,experienceNumber:e.experienceNumber,audienceLabel:e.audienceLabel||!1}),e.core.environment.flags.debug&&(window.martech.info.activitiesDetails=window.martech.info.activitiesDetails||[],window.martech.info.activitiesDetails.push(a()({},e.campaignName,i(i({},e),{},{campaignId:e.campaignId})))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(11),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.a.domain,a=e.replace("Activities/",""),o=t?"style-".concat(t):"style",s="martech-".concat(a),i=document.getElementsByTagName("head")[0],c=document.createElement("link");c.id=s,c.rel="stylesheet",c.type="text/css",c.href="".concat(n,"css/").concat(a,"/").concat(o,".css"),i.appendChild(c)}},function(e,t,n){"use strict";var r=n(5),a=n.n(r),o=n(6),s=n.n(o),i=n(1),c=n(9),l=function(){function e(t){a()(this,e),this.elementRoot="body",this.classOverlay="martech-modal-component-overlay",this.classModalClose="martech-modal-component__close",this.defaultConfig={campaignId:"010101010",campaignName:"generic_overlay",segmentID:"9999999",data:{},content:"",closeButton:!0,closeButtonPosition:"right",customCloseButton:!1,extraClass:!1,frequencyActive:!1,frequencyMbox:"overlay-dynamic-one",frequencyDays:7,detachOverlay:!0,displayOverlay:!0,displayMobile:!0,preventScrolling:!1,preventScrollingDesktop:!1,extraTrackingInfo:!1,offerDisplayTracking:!1,extraOverlayClass:!1,listVariables:!1,disableTracking:!1},this.config=Object.assign({},this.defaultConfig,t)}return s()(e,[{key:"init",value:function(){this.buildOverlay(),this.trackDisplay()}},{key:"buildOverlay",value:function(){var e=document.querySelector(this.elementRoot);this.overlay=document.createElement("div"),this.overlay.classList.add(this.classOverlay),this.config.extraOverlayClass&&this.overlay.classList.add(this.config.extraOverlayClass),e.appendChild(this.overlay),this.overlay=document.querySelector(".".concat(this.classOverlay)),!this.config.core.visitor.cookie_consent&&this.config.core.visitor.country_with_cookie_banner&&(this.overlay.style.zIndex=2147483630),this.overlay.appendChild(this.addModal()),window.martech.info.displayed.modal=!0}},{key:"addModal",value:function(){var e=document.createElement("div");if(e.classList.add("martech-modal-component"),e.dataset.test="martech-overlay martech-".concat(this.config.experienceName),this.config.extraClass&&"string"==typeof this.config.extraClass)for(var t=this.config.extraClass.split(" "),n=0;n<t.length;n++)e.classList.add(t[n]);var r='\n\t\t\t<button class="'.concat(this.classModalClose," ").concat(this.classModalClose,"--").concat(this.config.closeButtonPosition,'"\n\t\t\t\t\taria-label="Close"\n\t\t\t\t\tdata-test="martech-overlay-close-button">\n\t\t\t\t').concat(Object(c.a)("martech-modal-component__close-icon"),"\n\t\t\t</button>"),a='\n\t\t\t<div class="martech-modal-component__content">'.concat(this.config.content,"</div>");return e.innerHTML=this.config.closeButton?r+a:a,e}},{key:"trackDisplay",value:function(){this.config.displayOverlay&&this.overlay.classList.add("".concat(this.classOverlay,"--is-visible")),this.config.displayMobile||(this.overlay.classList.add("".concat(this.classOverlay,"--not-mobile")),document.documentElement.classList.add("martech-overlay-not-visible--mobile-disable"),document.body.classList.add("martech-overlay-not-visible--mobile-disable")),this.config.preventScrolling&&!this.config.preventScrollingDesktop&&(document.documentElement.classList.add("martech-overlay-not-visible"),document.body.classList.add("martech-overlay-not-visible")),this.config.preventScrollingDesktop&&(document.documentElement.classList.add("martech-modal-no-scroll-desktop"),document.body.classList.add("martech-modal-no-scroll-desktop"),this.overlay.classList.add("".concat(this.classOverlay,"--bg-not-mobile"))),this.trackingEvents(),this.modalEvents()}},{key:"trackingEvents",value:function(){var e=this.config.extraTrackingInfo?"overlay-loaded--".concat(this.config.extraTrackingInfo):"overlay-loaded";this.config.frequencyActive&&Object(i.b)(this.config.frequencyMbox,{frequency:this.config.frequencyDays}),this.config.disableTracking||(this.config.prop27?Object(i.a)({eVar75:e,prop27:this.config.prop27},["event52","event266"],this.config):this.config.listVariables?Object(i.a)({eVar75:e,list1:this.config.listVariables},["event52","event266"],this.config):this.config.offerDisplayTracking?Object(i.c)(e,this.config):Object(i.d)(e,this.config))}},{key:"detachModal",value:function(){if(this.overlay){this.overlay.parentNode.removeChild(this.overlay);var e=this.config.extraTrackingInfo?"overlay-closed--".concat(this.config.extraTrackingInfo):"overlay-closed";if(this.config.className){var t={};t[e]="true",t[e+"-epoch"]=(new Date).getTime(),t[e+"-time"]=(new Date).toUTCString(),Object(i.b)(this.config.className,t)}this.config.disableTracking||Object(i.d)(e,this.config),window.tmg.pubsub.publish({topic:"tmg.martech.overlayDismissed"})}this.config.preventScrolling&&(document.documentElement.classList.remove("martech-overlay-not-visible"),document.body.classList.remove("martech-overlay-not-visible")),this.config.preventScrollingDesktop&&(document.documentElement.classList.remove("martech-modal-no-scroll-desktop"),document.body.classList.remove("martech-modal-no-scroll-desktop"))}},{key:"modalEvents",value:function(){var e=this,t=document.querySelector(".".concat(this.classModalClose)),n=document.querySelector(".".concat(this.classOverlay));(this.config.closeButton||this.config.customCloseButton)&&t.addEventListener("click",(function(){e.detachModal()})),this.config.displayOverlay&&this.config.detachOverlay&&n.addEventListener("click",(function(t){t.target===n&&e.detachModal()}))}}]),e}();t.a=l},function(e,t,n){"use strict";t.a={get:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r="",a=0;a<n.length;a++){for(var o=n[a];" "===o.charAt(0);)o=o.substring(1);0===o.indexOf(t)&&(r=o.substring(t.length,o.length))}return r},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var a="expires="+r.toUTCString();document.cookie=e+"="+t+";"+a+";path=/;domain=telegraph.co.uk;"},del:function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=.telegraph.co.uk;"},sync:function(){}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"<svg ".concat(e?'class="'.concat(e,'"'):"",' viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t<path d="M2.25 8.85L0.9 7.5L0 8.4L2.25 10.65L12 0.9L11.1 0L2.25 8.85Z"/>\n\t\t</svg>')}},function(e,t,n){var r=n(23),a=n(24),o=n(25),s=n(27);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||s()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),a=n.n(r),o=n(5),s=n.n(o),i=n(6),c=n.n(i),l=n(2),u=n(1);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(){function e(t){s()(this,e),this.config=t}return c()(e,[{key:"init",value:function(e){this.templateInfo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({step:4,template:Object(l.c)(),scroll:!1,classModifier:"",headingContent:"Complete your account set up",progress:!1,newsletters:[],closeButton:!1,closeRefresh:!0,additionalTrackingInfo:!1},e),this.findElements(),this.modal&&this.header&&this.heading&&this.main&&(this.modifierClasses(),this.isScrollable(),this.progressBarPresent(),this.displayCloseButton(),this.stepDisplayTracking())}},{key:"findElements",value:function(){this.modal=document.querySelector(".martech-one-tap-modal"),this.header=document.querySelector(".martech-one-tap-modal__header"),this.heading=document.querySelector(".martech-one-tap-modal__heading"),this.main=document.querySelector(".martech-one-tap-modal__main")}},{key:"modifierClasses",value:function(){this.header.classList.add("martech-one-tap-modal__header","martech-one-tap-modal__header".concat(this.templateInfo.classModifier)),this.heading.innerHTML=this.templateInfo.headingContent,this.main.className="",this.main.classList.add("martech-one-tap-modal__main","martech-one-tap-modal__main".concat(this.templateInfo.classModifier)),this.main.innerHTML=this.templateInfo.template}},{key:"displayCloseButton",value:function(){this.templateInfo.closeButton?(this.modal.classList.remove("martech-one-tap-modal--hide-close"),this.templateInfo.closeRefresh&&this.modal.querySelector(".martech-modal-component__close-icon").addEventListener("click",(function(){setTimeout((function(){window.location.reload()}),500)}))):this.modal.classList.add("martech-one-tap-modal--hide-close")}},{key:"isScrollable",value:function(){this.templateInfo.scroll?(this.modal.classList.add("martech-one-tap-modal--scroll"),this.heightSetter()):this.modal.classList.contains("martech-one-tap-modal--scroll")&&!this.templateInfo.scroll&&this.modal.classList.remove("martech-one-tap-modal--scroll")}},{key:"progressBarPresent",value:function(){this.templateInfo.progress&&this.header.classList.add("martech-one-tap-modal--progress")}},{key:"heightSetter",value:function(){var e=document.querySelector(".martech-modal-component.martech-one-tap-modal--scroll");if(e){var t=e.querySelector(".martech-one-tap-modal__container");t&&e.setAttribute("style","--modal-max-height:".concat(t.offsetHeight,"px"))}}},{key:"stepDisplayTracking",value:function(){if(1===this.templateInfo.step)Object(u.a)({eVar75:"account-created-first-step-displayed",list1:this.getNewsletterIdsAsOrderedString()},["event52","event266"],this.config);else if(2===this.templateInfo.step)Object(u.d)("account-created-final-step-displayed",this.config);else if(3===this.templateInfo.step){var e=this.templateInfo.additionalTrackingInfo?this.templateInfo.additionalTrackingInfo:"account-created-error-displayed";Object(u.d)(e,this.config)}}},{key:"getNewsletterIdsAsOrderedString",value:function(){var e=this,t="";return this.templateInfo.newsletters&&this.templateInfo.newsletters.forEach((function(n,r){var a=r+1<e.templateInfo.newsletters.length?"--**--":"";t+="".concat(n,":").concat(r+1).concat(a)})),t}}]),e}()},function(e,t,n){"use strict";n.r(t),function(e){var t=n(3),r=n.n(t),a=n(5),o=n.n(a),s=n(6),i=n.n(s),c=n(0),l=n(14),u=n(15),d=n(1),p=n(16),g=n(17),h=n(2),m=n(8),f=n(19),y=n(13),b=n(21),v=n(4),w=n(10);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o()(this,t),this.config=e}return i()(t,[{key:"init",value:function(){var t=this;this.config?(Object(u.a)(this.config),this.checkModalPresence().then((function(){t.injectUserScript(),window.tmg.pubsub.subscribe({topic:"tmg.martech.oneTapLoader",func:function(){Object(p.a)(e),t.build()},runIfAlreadyPublished:!0})}))):Object(c.a)("Config not found for activity at ".concat(e))}},{key:"build",value:function(){this.modalConfig=_(_({},this.config),{},{extraClass:"martech-one-tap-modal martech-one-tap-modal--hide-close",content:Object(h.a)(),displayMobile:!0,preventScrolling:!1,displayOverlay:!0,detachOverlay:!1,extraOverlayClass:"martech-one-tap-modal__overlay--scroll"}),new g.a(this.modalConfig).init(),this.bindEvents(),document.documentElement.classList.add("martech-one-tap-modal--doc-scroll"),this.modalTemplate=new b.a(this.config),this.pubsubListeners()}},{key:"pubsubListeners",value:function(){var e=this;window.tmg.pubsub.subscribe({topic:"tmg.martech.oneTapRegisterComplete",func:function(){e.registerSuccess(),window.tmg.pubsub.unsubscribe({topic:"tmg.martech.oneTapRegisterError"})},runIfAlreadyPublished:!0}),window.tmg.pubsub.subscribe({topic:"tmg.martech.oneTapRegisterError",func:function(){e.registerFailure(),window.tmg.pubsub.unsubscribe({topic:"tmg.martech.oneTapRegisterComplete"})},runIfAlreadyPublished:!0})}},{key:"registerSuccess",value:function(){var t=this;Object(m.b)().then((function(n){t.tokens=n,Object(y.b)(t.config,t.tokens).then((function(e){var n=Object(y.a)(e);Object(d.b)("google-one-tap-display"),t.modalTemplate.init({step:1,template:Object(h.d)(n),scroll:!0,classModifier:"--success",progress:!0,newsletters:e,closeButton:!0})})).catch((function(){t.modalTemplate.init({step:2,template:Object(h.e)(),classModifier:"--final",headingContent:"Your account has been set up",closeButton:!0}),Object(c.a)("No newsletter recommendations returned at ".concat(e))}))})).catch((function(n){Object(d.b)("google-one-tap-display"),t.modalTemplate.init({step:3,template:Object(h.b)(),classModifier:"--error",closeButton:!0,additionalTrackingInfo:"getting-tokens-error-displayed"},t.config),Object(c.a)("Issue when getting api tokens at ".concat(e),{error:n})}))}},{key:"registerFailure",value:function(){this.modalTemplate.init({step:3,template:Object(h.b)(!0),classModifier:"--error",closeButton:!0,headingContent:"We couldn't create your account",closeRefresh:!1,progress:!0},this.config),Object(c.a)("Issue when trying to register the user at ".concat(e))}},{key:"newsletterSignup",value:function(t){var n=this;if(t){var r=t.querySelector(".martech-one-tap-modal__newsletter-card-button"),a=r.dataset.newsletterId,o=document.createElement("div"),s='\n\t\t\t\t<span class="martech-one-tap-modal__newsletter-card-icon-container">\n\t\t\t\t\t'.concat(Object(f.a)("martech-one-tap-modal__newsletter-card-subscribed-icon"),"\n\t\t\t\t</span>");Object(d.d)("".concat(a,"-cta-click"),this.config),o.classList.add("martech-one-tap-modal__card-subscribing"),o.innerHTML='\n\t\t\t\t<svg class="martech-one-tap-modal__newsletter-spinner" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<circle class="martech-one-tap-modal__newsletter-spinner-inner-circle" cx="50" cy="50" r="45"/>\n\t\t\t\t</svg>',r.parentNode.replaceChild(o,r),Object(m.d)(this.config,this.tokens,this.config.campaignName,a).then((function(r){"error"!==r?(o.innerHTML=s,t.classList.add("martech-one-tap-modal__newsletter-card--unclickable")):(n.modalTemplate.init({step:3,template:Object(h.b)(),classModifier:"--error",closeButton:!0,additionalTrackingInfo:"newsletter-signup-error-displayed"},n.config),Object(c.a)("Issue when submitting newsletter at at ".concat(e)))}))}}},{key:"submitForm",value:function(){var e=document.getElementById("martechOffers");e&&"boolean"==typeof e.checked&&e.checked?(Object(d.a)({evar32:!0,eVar75:"marketing-preferences-checked"},["event52","event148"],this.config),this.modalTemplate.init(),this.updatePreferences(e.checked)):this.modalTemplate.init({step:2,template:Object(h.e)(this.config.core.visitor.geo_location),classModifier:"--final",headingContent:"Your account has been set up",closeButton:!0})}},{key:"updatePreferences",value:function(t){var n=this,r=new Headers({"Content-Type":"application/json",id_token:this.tokens.id_token,access_token:this.tokens.access_token}),a={preference:{marketingEmailOptIn:t}};fetch("https://api.telegraph.co.uk/commerce/accounts/me",{method:"PUT",body:JSON.stringify(a),headers:r}).then(m.a).then((function(){n.modalTemplate.init({step:2,template:Object(h.e)(n.config.core.visitor.geo_location),classModifier:"--final",headingContent:"Your account has been set up",closeButton:!0})})).catch((function(t){n.modalTemplate.init({step:3,template:Object(h.b)(),classModifier:"--error",closeButton:!0,additionalTrackingInfo:"update-preferences-error-displayed"},n.config),Object(c.a)("Martech:: Issue when updating user's marketing preferences: ".concat(t," at ").concat(e))}))}},{key:"bindEvents",value:function(){var e=this;Object(v.a)(".martech-one-tap-modal__newsletter-cards-container").then((function(t){e.signUpCards=t.querySelectorAll(".martech-one-tap-modal__newsletter-card"),e.signUpCards&&e.signUpCards.forEach((function(t){t.addEventListener("click",(function n(){e.newsletterSignup(t),t.removeEventListener("click",n,!0)}),!0)}))})),Object(v.a)(".martech-one-tap-modal__form-button").then((function(t){t.addEventListener("click",(function(t){t.preventDefault(),e.submitForm()}))})),Object(v.a)(".martech-one-tap-modal .martech-modal-component__close").then((function(e){e.addEventListener("click",(function(e){document.documentElement.classList.remove("martech-one-tap-modal--doc-scroll")}))}))}},{key:"checkModalPresence",value:function(){var e=this;return new Promise((function(t){setTimeout((function(){!function(){var n,r,a;if(null===(n=window.martech)||void 0===n||null===(r=n.info)||void 0===r||null===(a=r.displayed)||void 0===a||!a.modal)return t();Object(c.a)("".concat(e.config.campaignName," - Modal displayed, One Tap library only to be loaded if modal closed.")),window.tmg.pubsub.subscribe({topic:"tmg.martech.overlayDismissed",func:function(){return setTimeout((function(){t()}),2e3)},runIfAlreadyPublished:!0})}()}),2500)}))}},{key:"injectUserScript",value:function(){Object(c.a)("".concat(this.config.campaignName," - Loading Google One Tap library."));var e=document.createElement("script");e.type="text/javascript",e.id="martech-one-tap-lib",e.src=Object(w.a)().scripts.onetap,e.async=!0,e.defer=!0,document.getElementsByTagName("body")[0].appendChild(e)}}]),t}();l.a.create("classes.GoogleOneTapLibrary"),martech.classes.GoogleOneTapLibrary=O}.call(this,"Activities/TGT-256--google-one-tap-library")},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(26);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}]);