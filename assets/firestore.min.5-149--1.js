"use strict";(self["tmg.build"]=self["tmg.build"]||[]).push([[965,493,625,2,768],{410:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(453),r=s(384),n=s(436);class o{constructor(){this.params={local:"local",qa:"qa",ci:"ci",staging:"staging",prod:"prod"},this.currentEnv=this.determineEnvironment(),r.Z.create("tmg.environment"),tmg.environment={currentEnv:this.currentEnv,getEnvironment:this.getEnvironment,getList:this.getList,getTld:this.getTld,isCommentingTurnedOn:this.isCommentingTurnedOn,isHttps:this.isHttps,isLocal:this.isLocal,isProd:this.isProd}}determineEnvironment(){const t=n.Z.getLocation().hostname.split(".");return t.some((t=>"local"===t||"127"===t||"localhost"===t))?this.getList().local:t.some((t=>/(^|-)ci[0-9]+(-app)?$/i.test(t)))?this.getList().ci:t.some((t=>/(^|-)qa[0-9]+(-app)?$/i.test(t)))?this.getList().qa:t.some((t=>/(^|-)staging(.*)$/i.test(t)))?this.getList().staging:this.getList().prod}getList(){return this.params}getEnvironment(){return this.currentEnv}getTld(){return"telegraph.co.uk"}isCommentingTurnedOn(){let t=!1;try{void 0!==tmg.COMMENTING_STATUS&&(t=!!tmg.COMMENTING_STATUS)}catch(t){console.log(t)}return t}isHttps(){return"https:"===n.Z.getLocation().protocol||this.isLocal()}isLocal(){return this.getEnvironment()===this.getList().local}isProd(){return this.getEnvironment()===this.getList().prod}}i.Z.subscribe({topic:"tmg.page.ready",func:new o,runIfAlreadyPublished:!0});const a=o},436:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(384),r=s(453);class n{constructor(){i.Z.create("tmg.page"),tmg.page={getMetaTag:this.getMetaTag,getMetaContent:this.getMetaContent,getPageType:this.getPageType,getPageTitle:this.getPageTitle,getChannel:this.getChannel,getBusinessSegment:this.getBusinessSegment,getCategory:this.getCategory,getContentType:this.getContentType,getArticleId:this.getArticleId,getPublishDate:this.getPublishDate,getKeywords:this.getKeywords,getLocation:this.getLocation,getLeadAssetLayout:this.getLeadAssetLayout,isArticle:this.isArticle,isSponsored:this.isSponsored,isGallery:this.isGallery,isGallery2:this.isGallery2,isPremium:this.isPremium,isApp:this.isApp.bind(this)}}getPageType(){return window.dataLayer&&window.dataLayer.pageType}getPageTitle(){return document.title}getChannel(){return this.getMetaContent("tmgads.channel")}getCategory(){return this.getMetaContent("DCSext.Category")}getBusinessSegment(){return this.getMetaContent("tmgads.businessSegment")}getContentType(){return this.getMetaContent("DCSext.Content_Type")}getArticleId(){return this.getMetaContent("tmgads.articleid")}getPublishDate(){return this.getMetaContent("DCSext.articleFirstPublished")}getKeywords(){return this.getMetaContent("keywords").split(",").map((t=>t.trim()))}getLocation(){return document.location}getMetaContent(t,e="content"){const s=this.getMetaTag(t);let i="generic";return s&&s.getAttribute(e)&&(i=s.getAttribute(e)),i}getMetaTag(t){return document.querySelector(`meta[name='${t}']`)}isArticle(){let t=!1;return["articleRenderer","articleRenderer2","longFormRenderer"].forEach((e=>{this.getPageType()===e&&(t=!0)})),t}isGallery(){return"galleryRenderer"===this.getPageType()}isGallery2(){return"galleryRenderer2"===this.getPageType()}isSponsored(){return"sponsored"===this.getBusinessSegment()}isPremium(){return"true"===this.getMetaContent("tmg.premium.state")}isApp(){return"true"===this.getMetaContent("tmg.app")}isAuthor(){return document.documentElement.hasAttribute("data-is-author")}getLeadAssetLayout(){return this.isArticle()&&document.querySelector("[data-lead-asset-layout]")?document.querySelector("[data-lead-asset-layout]").dataset.leadAssetLayout:this.isArticle()?"hidden":void 0}}r.Z.subscribe({topic:"tmg.page.ready",func:new n,runIfAlreadyPublished:!0});const o=new n},453:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(384);const r=new class{constructor(){this.topics=[],this.publishedTopics=[],this.UID=-1}subscribe({topic:t,func:e,runIfAlreadyPublished:s}){if("function"!=typeof e)return!1;if(s)for(let s=0;s<this.publishedTopics.length;s++)this.publishedTopics[s]===t&&e.call();const i=(this.UID+=1).toString();return this.topics.push({token:i,topic:t,func:e}),i}unsubscribe({topic:t}){for(let e=0;e<this.topics.length;e++)this.topics[e].topic===t&&this.topics.splice(e,1)}publish({topic:t}){this.publishedTopics.push(t);for(let e=0;e<this.topics.length;e++)this.topics[e].topic===t&&this.topics[e].func.call()}};i.Z.create("tmg.pubsub"),window.tmg.pubsub=r;const n=r},283:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(384),r=s(453);class n{constructor(){i.Z.create("tmg.utils"),tmg.utils={injectScript:this.injectScript,getRandomInt:this.getRandomInteger}}injectScript(t,e=!0){return new Promise(((s,i)=>{if(t){const i=document.createElement("script");i.setAttribute("src",t),i.addEventListener("load",s,!1),e&&i.setAttribute("defer","true"),document.querySelector("head").appendChild(i)}else i(Error("No src supplied"))}))}getRandomInteger(t,e){if(!t||!e)return;const s=Math.ceil(t),i=Math.floor(e);return Math.floor(Math.random()*(i-s)+s)}disableScrolling(){document.documentElement.style.overflow="hidden"}enableScrolling(){document.documentElement.style.overflow="auto"}}r.Z.subscribe({topic:"tmg.page.ready",func:new n,runIfAlreadyPublished:!0});const o=n},883:(t,e,s)=>{var i=s(410),r=s(384),n=s(283);r.Z.create("tmg.firestore");const o={databaseURL:"https://tmg-platforms-prod.firebaseio.com",projectId:"tmg-platforms-prod-aa404"};let a;const c=t=>t.replace(/\//g,"_"),g=()=>new Promise(((t,e)=>{t()})),l=()=>((()=>{const t=new i.Z;t.getEnvironment()!==t.getList().prod&&(o.databaseURL="https://tmg-platforms-preprod.firebaseio.com",o.projectId="tmg-platforms-preprod")})(),tmg.firestore=u,new Promise(((t,e)=>{(()=>{const t=new n.Z;return new Promise(((e,s)=>{const i=t.injectScript("//www.gstatic.com/firebasejs/5.0.4/firebase-app.js"),r=t.injectScript("//www.gstatic.com/firebasejs/5.0.4/firebase-firestore.js");Promise.all([i,r]).then((()=>{e()}))}))})().then((function(){firebase.initializeApp(o),a=firebase.firestore(),a.settings({timestampsInSnapshots:!0}),u={characterReplace:c,init:g,store:a},tmg.firestore=u,t()}))})));let u={init:l};l()},384:(t,e,s)=>{s.d(e,{Z:()=>r}),window.tmg=window.tmg||{};const i=function(t){try{let e=tmg,s=t.split(".");return"tmg"===s[0]&&(s=s.slice(1)),s.forEach((t=>{void 0===e[t]&&(e[t]={}),e=e[t]})),e}catch(e){console.warn("couldn't create namespace:",t)}};window.tmg.createNamespace=i;const r={create:i}}},t=>{t(t.s=883)}]);