!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t,r){e.exports=r(14)},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=r=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e){e.exports=JSON.parse('{"campaignClass":false,"campaignFolder":false}')},function(e,t){function r(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,c,"next",e)}function c(e){r(o,a,i,s,c,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e){e.exports=JSON.parse('{"profile":{"apiData":{},"user":{"pid":false,"session":{"id":false,"expire":false,"newSession":true},"seen":{"last_seen":false,"current_seen":false},"origin":false,"settings":{"meters":{}},"activities":{}},"profileScripts":{}},"status:":{}}')},function(e,t,r){var n=r(9),a=r(10),i=r(11),o=r(13);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){var n=r(12);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){"use strict";var r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),o=new P(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return O()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,o),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function p(){}function g(){}function h(){}var f={};c(f,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==r&&n.call(v,i)&&(f=v);var y=h.prototype=p.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,r){var a;this._invoke=function(i,o){function s(){return new r((function(a,s){!function a(i,o,s,c){var l=u(e[i],e,o);if("throw"!==l.type){var d=l.arg,p=d.value;return p&&"object"===t(p)&&n.call(p,"__await")?r.resolve(p.__await).then((function(e){a("next",e,s,c)}),(function(e){a("throw",e,s,c)})):r.resolve(p).then((function(e){d.value=e,s(d)}),(function(e){return a("throw",e,s,c)}))}c(l.arg)}(i,o,a,s)}))}return a=a?a.then(s,s):s()}}function _(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return g.prototype=h,c(y,"constructor",h),c(h,"constructor",g),g.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new b(l(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(y),c(y,s,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=r}catch(e){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}).call(this,r(15)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(e){return function(e){return!!e&&"object"===n(e)}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function s(e,t,r){return e.concat(t).map((function(e){return o(e,r)}))}function c(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function l(e,t){try{return t in e}catch(e){return!1}}function u(e,t,r){var n={};return r.isMergeableObject(e)&&c(e).forEach((function(t){n[t]=o(e[t],r)})),c(t).forEach((function(a){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(l(e,a)&&r.isMergeableObject(t[a])?n[a]=function(e,t){if(!t.customMerge)return d;var r=t.customMerge(e);return"function"==typeof r?r:d}(a,r)(e[a],t[a],r):n[a]=o(t[a],r))})),n}function d(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||s,r.isMergeableObject=r.isMergeableObject||a,r.cloneUnlessOtherwiseSpecified=o;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):u(e,t,r):o(t,r)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return d(e,r,t)}),{})};var p=d;e.exports=p},function(e,t,r){"use strict";r.r(t);var n=r(8),a=r.n(n),i=r(2),o=r.n(i),c=r(1),l=r.n(c),u=r(6),d=r.n(u),p=r(3),g=r.n(p),h=r(4),f=r.n(h),m=r(0),v=r.n(m),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(){return Boolean(window.martech&&window.martech.info&&!0===window.martech.info.debug)};if(window.console&&window.console.log&&r()){var n="prod",a="prod"===n?{color:"orange",background:"black"}:{color:"yellow",background:"#093547"};"string"!=typeof e?console.log("%c MARTECH (".concat("prod".toUpperCase(),") :: ").concat(t||""),"background:".concat(a.background,";color:").concat(a.color,";padding:4px;border:1px solid ").concat(a.color,";"),e):console.log("%c MARTECH (".concat("prod".toUpperCase(),") :: ").concat(e," "),"background:".concat(a.background,";color:").concat(a.color,";padding:4px;border:1px solid ").concat(a.color,";"))}};window.martech=window.martech||{};var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=martech,n=e.split(".");return"martech"===n[0]&&(n=n.slice(1)),n.forEach((function(e,a){void 0===r[e]&&(r[e]=Object.is(n.length-1,a)&&t?t:{}),r=r[e]})),r}catch(t){console.warn("Couldn't create namespace:",e)}},b=function(e){return JSON.parse(localStorage.getItem(e))?JSON.parse(localStorage.getItem(e)):{}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"martechdata",r=b(t),n=function(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)};if(r){var a=n(e,r);return a||!1}return y("LocalStorage ".concat(t," not found.")),!1},S=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"martechdata",n=b(r);if(n){var a=function(e,t){for(var r=n,a=e.split("."),i=a.length,o=0;o<i-1;o++){var s=a[o];r[s]||(r[s]={}),r=r[s]}r[a[i-1]]=t};return a(e,t),localStorage.setItem(r,JSON.stringify(n)),!0}return y("LocalStorage ".concat(r," not found.")),!1},x=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,r="function"==typeof window.URL?new window.URL(t).search.substring(1):t.split("?")[1],n=r.split("&"),a=0;a<n.length;a++){var i=n[a].split("=");if(i[0]===e)return i[1]}return!1},P=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r.campaignName){var a=n?t:"".concat(r.campaignName,"_").concat(t);try{if(void 0===window.s)throw new Error("MARTECH :: Waiting for s before firing tracking");s.eVar75=a,s.events="event52",s.linkTrackEvents="event52",s.linkTrackVars="events,eVar75"+_satellite.getVar("TMG linkTrackVars"),s.tl(!0,"o","Target Custom"),y("TRACKING :: ".concat(r.campaignName," --\x3e sendEventHit eVar75 = ").concat(a))}catch(a){setTimeout((function(){e(t,r,n)}),200)}}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){if(y("Callback ".concat(e," called...")),"google-one-tap-loader"===e&&window.tmg&&void 0!==window.tmg.pubsub&&window.tmg.pubsub.publish({topic:"tmg.martech.oneTapLoader"}),"google-one-tap-reg"===e){window.dataLayer.event=["registrationComplete"],window.dataLayer.registration={registrationType:"onetap"},window.dataLayer.userStatus="registered";var t={campaignId:"342575",campaignName:"TGT-256--google-one-tap-library"};P("google-one-tap-reg",t),window.tmg&&void 0!==window.tmg.pubsub&&window.tmg.pubsub.publish({topic:"tmg.martech.oneTapRegisterComplete"})}if("google-one-tap-login"===e){var r={campaignId:"342575",campaignName:"TGT-256--google-one-tap-library"};P("google-one-tap-login",r),setTimeout((function(){window.location.href=window.location.href}),1e3)}"google-one-tap-error"===e&&window.tmg&&void 0!==window.tmg.pubsub&&window.tmg.pubsub.publish({topic:"tmg.martech.oneTapRegisterError"})}},O=r(16),T={excluded:["chase.telegraph.co.uk"],dev:"https://dev-martech.platforms-preprod-gcp.telegraph.co.uk/martech/",preprod:"https://martech.platforms-preprod-gcp.telegraph.co.uk/martech/",prod:"https://www.telegraph.co.uk/martech/",local:{secure:"https://localhost:3002/martech/",unsecure:"http://localhost:3001/martech/"}};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C={ampproject:{hosts:["ampproject.org"]},aol:{hosts:["aol.co.uk","aol.com"]},appspot:{hosts:["appspot.com"]},ask:{hosts:["ask.com"]},auone:{hosts:["auone.jp"]},baidu:{hosts:["baidu.com"]},biglobe:{hosts:["biglobe.ne.jp"]},bing:{hosts:["bing.com"]},cambridge:{hosts:["cambridge.org"]},centrum:{hosts:["centrum.cz"]},coccoc:{hosts:["coccoc.com"]},daum:{hosts:["daum.net"]},docomo:{hosts:["docomo.ne.jp"]},dogpile:{hosts:["dogpile.com"]},duckduckgo:{hosts:["duckduckgo.com"]},earthlink:{hosts:["earthlink.net"]},ecosia:{hosts:["ecosia.org"]},goo:{hosts:["goo.ne.jp"]},goodreads:{hosts:["goodreads.com"]},google:{hosts:["google","googleadservices.com","googleapis.com"]},kvasir:{hosts:["kvasir.no"]},linuxmint:{hosts:["linuxmint.com"]},lycos:{hosts:["lycos.com"]},maxask:{hosts:["maxask.com"]},msn:{hosts:["msn.com"]},myway:{hosts:["myway.com"]},naver:{hosts:["naver.com"]},nifty:{hosts:["nifty.com"]},qwant:{hosts:["qwant.com"]},rakuten:{hosts:["rakuten.co.jp"]},sapo:{hosts:["sapo.pt"]},search:{hosts:["search.com"]},searchalot:{hosts:["searchalot.com"]},seznam:{hosts:["seznam.cz"]},shenma:{hosts:["sm.cn"]},so:{hosts:["so.com"]},sogou:{hosts:["sogou.com"]},startpagina:{hosts:["startpagina.nl"]},"t-online":{hosts:["t-online.de"]},walla:{hosts:["walla.co.il"]},xgoogle:{hosts:["xgoogle.xyz"]},yandex:{hosts:["yandex"]},yahoo:{hosts:["ouryahoo.com","yahoo"]}},M={avforums:{hosts:["avforums.com"]},blogspot:{hosts:["blogspot.com"]},cafemom:{hosts:["cafemom.com"]},digg:{hosts:["digg.com"]},disqus:{hosts:["disqus.com"]},facebook:{hosts:["facebook.com","fb.com"]},fc2:{hosts:[" fc2.com"]},feedly:{hosts:["feedly.com"]},goodreads:{hosts:["goodreads.com"]},instagram:{hosts:["instagram.com"]},linkedin:{hosts:["linkedin.com","lnkd.in"]},livejournal:{hosts:["livejournal.com"]},netvibes:{hosts:["netvibes.com"]},nextdoor:{hosts:["nextdoor.com"]},odnoklassniki:{hosts:["ok.ru"]},pinterest:{hosts:["pinterest"]},plurk:{hosts:["plurk.com"]},reddit:{hosts:["reddit.com"]},snapchat:{hosts:["snapchat.com"]},twitter:{hosts:["t.co","twitter.com"]},vk:{hosts:["vk.com"]},wordpress:{hosts:["wordpress.com"]},youtube:{hosts:["youtube.com"]},zhihu:{hosts:["zhihu.com"]}},D=E(E({},C),M),j=function(e,t){return e?e.split(".").reduce((function(e,t){return e?e[t]:null}),t):t},V=function(e,t,r){var n=o()(e),a=o()(t);return r?"object"===n&&"object"===a?JSON.stringify(e)===JSON.stringify(t):e===t:!(!Array.isArray(t)&&"string"!==a)&&t.includes(e)},N=function(){function e(t){g()(this,e),this.core=t}return f()(e,[{key:"getVisitorData",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=j(e,this.core.visitor);if(Array.isArray(t)){var a=!!n&&n.split(",");return!!a&&t.filter(Set.prototype.has,new Set(a)).length>0}return V(t,n,r)}},{key:"getP13nData",value:function(e,t){if(!this.core.p13n)return!1;var r=j(e,this.core.p13n);return V(t,r,!1)}},{key:"getPScriptData",value:function(e,t,r){if(!this.core.profileScripts[e])return!1;var n=j(t,this.core.profileScripts[e]);return V(r,n,!0)}},{key:"customAudience",value:function(e){var t=this.core.visitor;switch(e){case"Page: Articles & Galleries":return!("article"!==t.page_type&&"gallery"!==t.page_type);case"Page: Article 2":return"articlerenderer2"===t.page_renderer;case"Page: Article 3":return"articlerenderer"===t.page_renderer;case"Page: Gallery":return"galleryRenderer"===t.page_renderer;case"Page: Gallery 2":return"galleryRenderer2"===t.page_renderer;case"Page: Sport Articles":return"sport"===t.business_segment;case"Page: Topic":return"topic"===t.content_type;case"Page: Bare":return"bare"===t.content_type;case"Page: Index":return"index"===t.content_type;case"Page: Portal":return"portal"===t.channel;case"Page: Acquisition pages":return t.page_url.includes("/customer/");case"Page: Subscribe Page":return!!["/customer/subscribe/","/customer/subscribe"].includes(t.page_url);case"Page: Travel Editorial":return!("travel"!==t.channel||!this.getVisitorData("keywords","travel")||t.page_url.includes("/hotel/"));case"Exclusion: Travel Commercial":return!("travel"===t.channel&&this.getVisitorData("content_type",["travel-product-listing","travel-review"]));case"Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot":return!(["secure","corporate"].includes(t.page_url_subdomain)||t.page_url.includes("/customer/subscribe")||["sponsored","commerce"].includes(t.business_segment)||this.getVisitorData("keywords",["sponsored","telegraph reviews","recommended"])||["financial-services","events","sponsored","recommended","commerce","portal","about-us","contact-us","error"].includes(t.channel)||!0===t.user_bot);case"Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot":return!(["secure","corporate"].includes(t.page_url_subdomain)||t.page_url.includes("/customer/subscribe")||["sponsored","commerce"].includes(t.business_segment)||this.getVisitorData("keywords",["sponsored","telegraph reviews","recommended"])||["financial-services","events","sponsored","recommended","commerce","about-us","contact-us","error"].includes(t.channel)||!0===t.user_bot);case"Exclusion: Hard Overlay Page URLs":return!["/christmas","/fantasy-sports","/news/plusword/","/articles/the-best-hotels-for-spa-breaks-in-the-uk","/articles/best-romantic-hotels-in-the-uk/","/articles/best-family-friendly-hotels-uk/","/articles/best-seaside-beach-hotels-uk/","/articles/the-best-country-house-hotels-in-britain/","/articles/best-family-friendly-hotels-in-england/","/articles/the-best-cotswolds-spa-hotels/","/articles/best-uk-honeymoons-and-minimoons-hotels/","/articles/best-spa-hotels-in-the-lake-district/","/articles/the-best-spa-hotels-in-the-north-of-england/"].some((function(e){return t.page_url_path.includes(e)}));case"Exclusion: Pages referred from Social urls":return!Object.getOwnPropertyNames(M).includes(t.source_referrer);case"Exclusion: Pages referred from Search urls":return!Object.getOwnPropertyNames(C).includes(t.source_referrer);case"Exclusion: Social Media Articles Targeting":return!["leaving-london-best-commuter-villages-buy-home-less-500k","working-home-three-days-week-best-value-rural-hotspots-still","costly-property-traps-every-first-time-buyer-needs-avoid"].some((function(e){return t.page_url.includes(e)}));case"Exclusion: Commercial Articles (Soft Experiences)":return!["/gardening/how-to-grow/spring-has-sprung-gardening-can-salvation-times-crisis/","/gardening/how-to-grow/grow-radishes-mild-french-breakfast-crisp-mooli/","/gardening/how-to-grow/gardening-offers-and-deals-from-telegraph-garden/","/women/sex/the-20-best-online-dating-websites/","/theatre/what-to-see/london-theatre-best-shows-plays-now/","/theatre/what-to-see/15-essential-plays-musicals-book-tickets-autumn-2019/","/theatre/what-to-see/15-must-see-plays-musicals-book-tickets-spring/","/culture/theatre/theatre-reviews/9944210/The-Book-of-Mormon-at-Prince-of-Wales-theatre.html","/theatre/what-to-see/tina-musical-aldwych-review-joyful-lungs-bursting-show-simply/","/theatre/what-to-see/andrew-lloyd-webbers-school-of-rock-review-the-most-enjoyable-fe/","/theatre/what-to-see/motown-the-musical-review-a-lavish-slick-song-crammed-show/","/theatre/what-to-see/lehman-trilogy-review-piccadilly-theatre-bankably-brilliant/","/theatre/what-to-see/9-5-musical-review-bonnie-langford-employee-month-feelgood-flimsy/","/theatre/what-to-see/wicked-why-the-musical-defied-the-odds-and-is-still-a-phenomenon/","/culture/6375768/The-Lion-King-at-the-Lyceum-Theatre-review.html","/theatre/what-to-see/girl-north-country-noel-coward-theatre-review-magical-fusion/","/theatre/what-to-see/kinky-boots-adelphi-theatre-review/","/theatre/what-to-see/eve-review-noel-coward-theatre-lily-james-lacks-peculiarity/","/theatre/what-to-see/son-review-kiln-theatre-london-nw6-devastating-tale-youth-blighted/","/theatre/what-to-see/10-things-you-didnt-know-about-the-mousetrap/","/theatre/what-to-see/rosmersholm-review-duke-yorks-theatrehayley-atwell-tom-burke/","/theatre/what-to-see/disneys-aladdin-at-the-prince-edward-makes-you-pine-for-panto/","/culture/theatre/theatre-news/9076901/Phantom-of-the-Opera-makes-Broadway-history-with-10000th-show.html","/theatre/what-to-see/waitress-reviewadelphi-theatre-meaty-musical-packed-delicious/","/theatre/what-to-see/tom-hiddleston-hamlet-supremely-self-assured-prince-radas/","/theatre/what-to-see/come-away-phoenix-theatre-review-glossing-trauma-911/","/theatre/what-to-see/home-darling-review-duke-yorks-theatre-compellingly-bleak-echo/","/theatre/what-to-see/starry-messenger-review-wyndhams-theatrea-long-comic-drama-need/","/theatre/what-to-see/toast-review-palace-nigel-slaters-youth-becomes-paean-joys-cooking/","/theatre/what-to-see/american-clock-review-old-vic-london-se1-eerily-to-the-moment/","/cars/advice/sell-car-online/","/cars/advice/get-good-price-car/","/cars/advice/best-times-buy-sell-cars/","/cars/advice/know-time-sell-car/","/cars/advice/best-websites-sell-car/","/cars/advice/10-best-websites-quickly-easily-value-car-free/","/men/thinking-man/bald-ambition-had-hair-transplant-28/","/men/thinking-man/five-things-you-learn-when-you-have-a-hair-transplant-like-james/","/men/the-filter/hair-transplant-faq-ten-common-questions-hair-loss-procedures/","/health-fitness/body/what-makes-a-good-candidate-for-a-hair-transplant/","/health-fitness/body/10-thing-no-one-tells-become-hair-transplant-surgeon/","/health-fitness/body/how-to-cure-baldness-without-losing-your-money-as-well-as-your-h/","/men/style/eight-baldness-cures-could-soon-put-end-hair-loss-woes/","/health-fitness/body/finasteride-does-donald-trumps-favourite-hair-loss-treatment/","/men/the-filter/scientists-may-have-discovered-cure-hair-loss-can-royals-barber/","/health-fitness/body/will-ever-find-cure-baldness/","/men/the-filter/five-weird-and-wonderful-hair-loss-treatments/","/health-fitness/body/could-blood-injections-be-the-cure-for-male-pattern-baldness/","/health-fitness/body/hair-transplant-treatment-best/","/health-fitness/body/hair-plugs-should-get/","/health-fitness/body/six-questions-should-ask-hair-transplant-clinic-paying-services/","/health-fitness/body/hair-loss-treatments-ones-really-work/","/health-fitness/body/complete-guide-hair-transplants-alternatives/","/men/style/david-beckham-might-losing-hair-gaining-opportunity/"].some((function(e){return t.page_url.includes(e)}));case"Domain: Staging Environment":return!("secure-staging-ams64"!==t.page_url_subdomain&&"staging-ams64"!==t.page_url_subdomain||"telegraph.co.uk"!==t.page_url_domain);case"Domain: Secure Staging":return!("secure-staging-ams64"!==t.page_url_subdomain||"telegraph.co.uk"!==t.page_url_domain);case"Domain: Secure Telegraph":return!("secure"!==t.page_url_subdomain||"telegraph.co.uk"!==t.page_url_domain);case"Domain: AEM QA Environments":return!(!t.page_url_subdomain.includes("qa")||"telegraph.co.uk"!==t.page_url_domain);case"Domain: www.telegraph.co.uk":return!!t.page_url_host.includes("www.telegraph.co.uk");case"Domain: ci subdomain":return!!t.page_url_subdomain.includes("ci");case"Paywalls: Sedondary Paywall Ruleset":return"articleRenderer2"===t.page_renderer&&["property","travel"].includes(t.channel)||t.browser_name.startsWith("IE")||t.browser_name.endsWith("IE");default:return!1}}}]),e}(),I=r(5),L=r(7),G=function(){function e(t){g()(this,e),this.visitor=t,this.pId=!(!this.visitor.cookies.tmg_p13n||!this.visitor.cookies.tmg_p13n.pId)&&this.visitor.cookies.tmg_p13n.pId}return f()(e,[{key:"getProfile",value:function(){var e=this.getLocalProfile()||!1,t=this.updateSeen(e.user.seen);return{user:{pid:e.user.pid,session:e.user.session,seen:t,origin:this.visitor.page_url_host,settings:e.user.settings,activities:e.user.activities},profileScripts:e.profileScripts}}},{key:"updateSeen",value:function(e){var t=e.current_seen||!1;return e.last_seen=t||!1,e.current_seen=Date.now(),{last_seen:e.last_seen,current_seen:e.current_seen}}},{key:"createProfile",value:function(e){var t=_("profile");t?(S("profile.user",O(t.user,e.user)),S("profile.profileScripts",O(t.profileScripts,e.profileScripts)),y("Profile Class :: localProfile updated.")):(S("profile",{user:e.user,profileScripts:e.profileScripts}),y("Profile Class :: localProfile Created."))}},{key:"getLocalProfile",value:function(){var e=_("profile");return e&&e.user?e.user.pid?this.pId?e.user.pid!==this.pId?((e=L).profile.apiData={},e.profile.user.pid=this.pId,S("profile",e.profile),e.profile):e:(S("profile",(e=L).profile),e.profile):this.pId?(e.user.pid=this.pId,e):e:this.pId?((e=L).profile.user.pid=this.pId,e.profile):(e=L).profile}}]),e}(),R=function(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n="",a=0;a<r.length;a++){for(var i=r[a];" "===i.charAt(0);)i=i.substring(1);0===i.indexOf(t)&&(n=i.substring(t.length,i.length))}return n},B=function(e){return"{".concat(e,"}")},W=function(e){var t=!1;try{t=JSON.parse(e)}catch(e){}return t},F=function(e){var t=e;return t=t.replace(/^\s*(.*?):/,'"$1":')},q=function(e){var t=e;return t=(t=(t=t.replace(/^\s*'([^']+|\\')':/,'"$1":')).replace(/:\s*('')\s*$/,': ""')).replace(/:\s*'([^']+|\\')'\s*$/,': "$1"')},z=function(e,t){var r=t||{},n=e,a=[],i=[],o=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,s=/^\s*{?\s*'|'\s*}?\s*$/i;if(!e)return r;if("[object Object]"===Object.prototype.toString.call(e))return e;if(W(n)||((n.match(o)||[]).forEach((function(e){if(e.includes('"label"')){var t=e.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1"),r=t.replace(/"/gi,'\\"'),a=e.replace(t,r);n=n.replace(e,a)}})),a=n.replace(o,"").split(/,(?=(?:[^,]*:[^,]*)|[^,]*$)/)),a.forEach((function(e){var t=e.replace(/^\s*{|}\s*$/gi,"");W(B(t))||i.push(t)})),i.forEach((function(e){var t=!1,r=e;!0===s.test(e)&&(r=q(e),t=W(B(r))),t||!0!==/[^"']\w+[^"']:/.test(r)||(r=F(r),t=W(B(r))),t&&(n=n.replace(e,r))})),W(n))r=W(n);else try{JSON.parse(n)}catch(e){console.log("martech utility/json failed:",e)}return r},U={afghanistan:"AF","aland islands":"AX",albania:"AL",algeria:"DZ","american samoa":"AS",andorra:"AD",angola:"AO",anguilla:"AI",antarctica:"AQ","antigua and barbuda":"AG",argentina:"AR",armenia:"AM",aruba:"AW",australia:"AU",austria:"AT",azerbaijan:"AZ",bahrain:"BH",bahamas:"BS",bangladesh:"BD",barbados:"BB",belarus:"BY",belgium:"BE",belize:"BZ",benin:"BJ",bermuda:"BM",bhutan:"BT",bolivia:"BO",bonaire:"BQ","bosnia and herzegovina":"BA",botswana:"BW","bouvet island":"BV",brazil:"BR","british indian ocean territory":"IO","brunei darussalam":"BN",bulgaria:"BG","burkina faso":"BF",burundi:"BI",cambodia:"KH",cameroon:"CM",canada:"CA","cape verde":"CV","cayman islands":"KY","central african republic":"CF",chad:"TD",chile:"CL",china:"CN","christmas island":"CX","cocos islands":"CC",colombia:"CO",comoros:"KM",congo:"CG","congo democratic republic":"CD","cook islands":"CK","costa rica":"CR","cote d ivoire":"CI",croatia:"HR",cuba:"CU",curacao:"CW",cyprus:"CY","czech republic":"CZ",denmark:"DK",djibouti:"DJ",dominica:"DM","dominican republic":"DO",ecuador:"EC",egypt:"EG","el salvador":"SV","equatorial guinea":"GQ",eritrea:"ER",estonia:"EE",ethiopia:"ET","falkland islands":"FK","faroe islands":"FO",fiji:"FJ",finland:"FI",france:"FR","french guiana":"GF","french polynesia":"PF","french southern territories":"TF",gabon:"GA",gambia:"GM",georgia:"GE",germany:"DE",ghana:"GH",gibraltar:"GI",greece:"GR",greenland:"GL",grenada:"GD",guadeloupe:"GP",guam:"GU",guatemala:"GT",guernsey:"GG",guinea:"GN","guinea-bissau":"GW",guyana:"GY",haiti:"HT","heard island and mcdonald islands":"HM","holy see":"VA",honduras:"HN","hong kong":"HK",hungary:"HU",iceland:"IS",india:"IN",indonesia:"ID",iran:"IR",iraq:"IQ",ireland:"IE","isle of man":"IM",israel:"IL",italy:"IT",jamaica:"JM",japan:"JP",jersey:"JE",jordan:"JO",kazakhstan:"KZ",kenya:"KE",kiribati:"KI","north korea":"KP","south korea":"KR",kuwait:"KW",kyrgyzstan:"KG",laos:"LA",latvia:"LV",lebanon:"LB",lesotho:"LS",liberia:"LR",libya:"LY",liechtenstein:"LI",lithuania:"LT",luxembourg:"LU",macao:"MO",macedonia:"MK",madagascar:"MG",malawi:"MW",malaysia:"MY",maldives:"MV",mali:"ML",malta:"MT","marshall islands":"MH",martinique:"MQ",mauritania:"MR",mauritius:"MU",mayotte:"YT",mexico:"MX",micronesia:"FM",moldova:"MD",monaco:"MC",mongolia:"MN",montenegro:"ME",montserrat:"MS",morocco:"MA",mozambique:"MZ",myanmar:"MM",namibia:"NA",nauru:"NR",nepal:"NP",netherlands:"NL","new caledonia":"NC","new zealand":"NZ",nicaragua:"NI",niger:"NE",nigeria:"NG",niue:"NU","norfolk island":"NF","northern mariana islands":"MP",norway:"NO",oman:"OM",pakistan:"PK",palau:"PW",palestine:"PS",panama:"PA","papua new guinea":"PG",paraguay:"PY",peru:"PE",philippines:"PH",pitcairn:"PN",poland:"PL",portugal:"PT","puerto Rico":"PR",qatar:"QA",reunion:"RE",romania:"RO","russian federation":"RU",rwanda:"RW","saint barthelemy":"BL","saint helena":"SH","saint kitts and nevis":"KN","saint lucia":"LC","saint martin":"MF","saint Pierre and Miquelon":"PM","saint vincent and the grenadines":"VC",samoa:"WS","san marino":"SM","sao tome and principe":"ST","saudi arabia":"SA",senegal:"SN",serbia:"RS",seychelles:"SC","sierra leone":"SL",singapore:"SG","sint maarten":"SX",slovakia:"SK",slovenia:"SI","solomon islands":"SB",somalia:"SO","south africa":"ZA","south georgia and the south sandwich islands":"GS","south sudan":"SS",spain:"ES","sri lanka":"LK",sudan:"SD",suriname:"SR","svalbard and jan mayen":"SJ",swaziland:"SZ",sweden:"SE",switzerland:"CH","syrian arab republic":"SY",taiwan:"TW",tajikistan:"TJ",tanzania:"TZ",thailand:"TH","timor-leste":"TL",togo:"TG",tokelau:"TK",tonga:"TO","trinidad and tobago":"TT",tunisia:"TN",turkey:"TR",turkmenistan:"TM","turks and caicos islands":"TC",tuvalu:"TV",uganda:"UG",ukraine:"UA","united arab emirates":"AE","united kingdom":"GB","united states":"US","united states minor outlying islands":"UM",uruguay:"UY",uzbekistan:"UZ",vanuatu:"VU",venezuela:"VE","viet nam":"VN","british virgin islands":"VG","u.s. virgin Islands":"VI","wallis and futuna":"WF","western sahara":"EH",yemen:"YE",zambia:"ZM",zimbabwe:"ZW"};function H(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(){function e(){g()(this,e)}return f()(e,[{key:"init",value:function(){return this.setAudience()}},{key:"getScreenWidth",value:function(){return window.screen.width}},{key:"getScreenHeight",value:function(){return window.screen.height}},{key:"getViewportWidth",value:function(){return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)}},{key:"getViewportHeight",value:function(){return Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}},{key:"getBrowserVendor",value:function(){return"undefined"!=typeof navigator&&navigator.vendor}},{key:"getBrowserLanguage",value:function(){return"undefined"!=typeof navigator&&navigator.language}},{key:"getUserAgent",value:function(){return"undefined"!=typeof navigator&&navigator.userAgent}},{key:"getOSInfo",value:function(){var e=navigator.userAgent,t=navigator.appVersion,r="unknown",n="unknown",a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var i in a){var o=a[i];if(o.r.test(e)){r=o.s;break}}switch(/Windows/.test(r)&&(n=/Windows (.*)/.exec(r)[1],r="Windows"),/Mac OS/.test(r)&&(r="Mac OS"),r){case"QNX":case"UNIX":case"Sun OS":case"Open BSD":r="Linux";break;case"Mac OS":case"Android":n=(n=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(e)[1]).replace(/_/gi,".");break;case"iOS":n=(n=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+n[2]+"."+(0|n[3])}return{os:r,version:n}}},{key:"getUserBot",value:function(){var e=this.getUserAgent();return!!e&&null!==e.match(/bot\b|spider|crawl|wget|slurp|Mediapartners-Google|nutch|BingPreview|PhantomJS|PTST|yahoo ad mon|Google Web Preview|Google Page Speed|outbrain|Pingdom|yandex/i)}},{key:"getReferrer",value:function(){if(!document.referrer)return!1;var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return-1!==document.referrer.indexOf(".".concat(e+(t?"":".")))||-1!==document.referrer.indexOf("://".concat(e+(t?"":".")))};return Object.getOwnPropertyNames(D).find((function(t){return e(t)||D[t].hosts.filter((function(t){return e(t,!0)})).length>0}))||!1}},{key:"getTouchScreen",value:function(){var e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{var t=window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&"(pointer:coarse)"===t.media)e=!!t.matches;else if("orientation"in window)e=!0;else{var r=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)}}return e}},{key:"getConnectionSpeed",value:function(){var e=navigator.connection||navigator.mozConnection||!1|navigator.webkitConnection;return e?e.effectiveType:""}},{key:"getIsMobile",value:function(){var e=navigator.userAgent,t=/iPhone/i,r=/iPod/i,n=/iPad/i,a=/\biOS-universal(?:.+)Mac\b/i,i=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,s=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,c=/Silk/i,l=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,p=/BB10/i,g=/Opera Mini/i,h=/\b(CriOS|Chrome)(?:.+)Mobile/i,f=/Mobile(?:.+)Firefox\b/i,m=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};return function(e){var v={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?v.userAgent=e:e&&e.userAgent&&(v={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):v={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var y=v.userAgent,w=y.split("[FBAN");void 0!==w[1]&&(y=w[0]),void 0!==(w=y.split("Twitter"))[1]&&(y=w[0]);var b=function(e){return function(t){return t.test(e)}}(y),_={apple:{phone:b(t)&&!b(l),ipod:b(r),tablet:!b(t)&&(b(n)||m(v))&&!b(l),universal:b(a),device:(b(t)||b(r)||b(n)||b(a)||m(v))&&!b(l)},amazon:{phone:b(s),tablet:!b(s)&&b(c),device:b(s)||b(c)},android:{phone:!b(l)&&b(s)||!b(l)&&b(i),tablet:!b(l)&&!b(s)&&!b(i)&&(b(c)||b(o)),device:!b(l)&&(b(s)||b(c)||b(i)||b(o))||b(/\bokhttp\b/i)},windows:{phone:b(l),tablet:b(u),device:b(l)||b(u)},other:{blackberry:b(d),blackberry10:b(p),opera:b(g),firefox:b(f),chrome:b(h),device:b(d)||b(p)||b(g)||b(f)||b(h)},any:!1,phone:!1,tablet:!1};return _.any=_.apple.device||_.android.device||_.windows.device||_.other.device,_.phone=_.apple.phone||_.android.phone||_.windows.phone,_.tablet=_.apple.tablet||_.android.tablet||_.windows.tablet,_}(e)}},{key:"getUrl",value:function(){var e=!(!window.location||!window.location.href)&&window.location.href,t=!(!window.location||!window.location.protocol)&&window.location.protocol.replace(":",""),r=!(!window.location||!window.location.search||""===window.location.search)&&window.location.search.replace("?",""),n=!1,a=!1;if(window.location&&window.location.hostname){var i=window.location.hostname.split(".");"www"===(a=i.shift())&&(a=!1),n=i.join(".")}return{url:e,protocol:t,query:r,domain:n,subdomain:a}}},{key:"getBrowser",value:function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===r[1]&&null!==(e=t.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:e[1]}:"CriOS"===r[1]?{name:"Chrome",version:null!==(e=t.match(/\bCriOS\/(\d+)/))?e[1]:"0"}:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]),{name:r[0],version:r[1]})}},{key:"getGeoISO",value:function(){var e=document.querySelector('meta[name="tmgads.geo"]');return!!e&&e.content}},{key:"getGeoLocation",value:function(e){return e&&Object.keys(U).find((function(t){return U[t]===e.toUpperCase()}))||!1}},{key:"getPlatform",value:function(){var e=document.querySelector(".escenic-title")||!1,t=document.querySelector("#gatsby-noscript")||!1,r=document.querySelector("html").classList||!1;if(e)return"escenic";if(t)return"spa";if(!r)return"unknow";var n,a=H(r);try{for(a.s();!(n=a.n()).done;){if(n.value.includes("Renderer"))return"aem"}}catch(e){a.e(e)}finally{a.f()}}},{key:"getCookies",value:function(){return{tmg_p13n:!!R("tmg_p13n")&&z(R("tmg_p13n")||!1),tmg_session:R("tmg_session")&&R("tmg_session")||!1,tmg_refresh:R("tmg_refresh")&&R("tmg_refresh")||!1,tmg_pid:R("tmg_pid")&&R("tmg_pid")||!1,tmg_createddate:R("tmg_createddate")&&R("tmg_createddate")||!1,s_vis_repeat:R("s_vis_repeat")&&R("s_vis_repeat")||!1,spV1Consent:R("_sp_v1_consent")&&R("_sp_v1_consent")||!1,utp:R("__utp")&&R("__utp")||!1}}},{key:"getPageMeta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.querySelector('meta[name="'.concat(e,'"]')),a=!!n&&(r?r(t?n.content.toLowerCase():n.content):t?n.content.toLowerCase():n.content);return"false"!==a&&("true"===a||a)}},{key:"getPageType",value:function(){var e=this.getPageRenderer()||"unknown",t=this.getPageMeta("DCSext.Content_Type",!0);return["galleryRenderer","galleryRenderer2"].includes(e)?"gallery":["articleRenderer","articleRenderer2","longFormRenderer"].includes(e)?"article":"homePageRenderer"===e?"homepage":"indexRenderer"===e&&"topic"===t?"topic":"indexRenderer"===e&&"index"===t?"index":e}},{key:"getPageRenderer",value:function(){var e=document.querySelector("html").classList||!1;if(e){var t,r=H(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.includes("Renderer"))return n.replace("HTML","")}}catch(e){r.e(e)}finally{r.f()}return!1}return!1}},{key:"getPageIcid",value:function(){var e=x("icid"),t=x("ICID");return e||t||!1}},{key:"getOfferID",value:function(){var e=x("offerId"),t=x("offerID"),r=x("offerid"),n=x("OFFERID");return e||t||r||n||!1}},{key:"getUserStatus",value:function(e){var t=R("tmg_pid"),r=this.getUserTypeExtensions(e,"readerTypeExtension"),n=this.getUserTypeExtensions(e,"subscriptionTypeExtension"),a=t?"logged in":"logged out";return e&&e.readerType?a+="subscriber"===e.readerType||"subscribed"===e.readerType?";subscriber":";registered":a+=t?";registered":";anonymous",{logged_in:!!a.includes("logged in"),logged_in_registered:!(!a.includes("logged in")||!a.includes("registered")),logged_in_subscriber:!(!a.includes("logged in")||!a.includes("subscriber")),logged_out_registered:!(a.includes("logged in")||!a.includes("registered")),logged_out_subscriber:!(a.includes("logged in")||!a.includes("subscriber")),anonymous:!!a.includes("anonymous"),registered:!!a.includes("registered"),subscriber:!!a.includes("subscriber"),type_digital:!(!a.includes("subscriber")||"Standard"!==e.subscriptionType),type_digital_plus:!(!a.includes("subscriber")||"All Digital Access"!==e.subscriptionType),type_digital_light:!(!a.includes("subscriber")||"Digital Light"!==e.subscriptionType),type_flexreg:!(!r||!r.includes("flexreg")),type_puzzle:!(!n||!n.includes("Puzzles")),type_wine:!(!n||!n.includes("Wine")),type_wine_puzzle_only:!(!a.includes("subscriber")||!n||!n.includes("Puzzles")&&!n.includes("Wine")||"Standard"===e.subscriptionType||"Digital Light"===e.subscriptionType)}}},{key:"getCookieConsent",value:function(e){return!(!e||!e.includes("!1"))}},{key:"getIsCountryWithCookieBanner",value:function(e){return["united kingdom","austria","belgium","bulgaria","croatia","cyprus","czech republic","denmark","estonia","finland","france","germany","greece","hungary","ireland","italy","latvia","lithuania","luxembourg","malta","netherlands","poland","portugal","romania","slovakia","slovenia","spain","sweden","iceland","liechtenstein","norway"].includes(e)}},{key:"getIsCountryAllowToSell",value:function(e){return["argentina","australia","austria","bahrain","barbados","belgium","bermuda","brazil","bulgaria","canada","cayman islands","china","croatia","cyprus","czech republic","denmark","estonia","falkland islands","finland","france","germany","gibraltar","greece","hong kong","hungary","japan","kenya","iceland","india","indonesia","ireland","israel","italy","latvia","lithuania","luxembourg","malaysia","malta","mexico","monaco","netherlands","new zealand","norway","philippines","poland","portugal","qatar","romania","russian federation","saudi arabia","singapore","slovakia","slovenia","south africa","south korea","spain","sweden","switzerland","thailand","turkey","united arab emirates","united kingdom","united states"].includes(e)}},{key:"getSubscriptionType",value:function(e){var t=!1;return e&&e.subscriptionType&&(t=e.subscriptionType.toLowerCase()),t}},{key:"getUserTypeExtensions",value:function(e,t){var r=!1,n=[];e&&e[t]&&((Array.isArray(e[t])?e[t]:e[t].split(",")).forEach((function(e){n.push(e)})),r=n.length>0?n:r);return r}},{key:"getArticlePublicRange",value:function(e){var t=this.getPageMeta("DCSext.articleFirstPublished"),r=(new Date).getTime()-864e5*e;return(t=Date.parse(t))>r}},{key:"setAudience",value:function(){return{display_screen_width:this.getScreenWidth(),display_screen_height:this.getScreenHeight(),display_viewport_width:this.getViewportWidth(),display_viewport_height:this.getViewportHeight(),display_has_touch_support:this.getTouchScreen(),network_connection_speed:this.getConnectionSpeed(),mobile_device_is_mobile:this.getIsMobile().any,mobile_device_is_tablet:this.getIsMobile().tablet,mobile_device_is_phone:this.getIsMobile().phone,os_platform:this.getOSInfo().os,os_version:this.getOSInfo().version,page_type:this.getPageType(),page_url:this.getUrl().url,page_url_protocol:this.getUrl().protocol,page_url_host:window.location.host||!1,page_url_domain:this.getUrl().domain,page_url_subdomain:this.getUrl().subdomain,page_url_query:this.getUrl().query,page_url_path:window.location.pathname||!1,browser_name:this.getBrowser().name,browser_version:this.getBrowser().version,browser_language:this.getBrowserLanguage(),browser_vendor:this.getBrowserVendor(),source_referrer:this.getReferrer(),user_agent:this.getUserAgent(),user_bot:this.getUserBot(),cookies:this.getCookies(),geo_iso:this.getGeoISO(),geo_location:this.getGeoLocation(this.getGeoISO()),platform:this.getPlatform()||!1,channel:this.getPageMeta("DCSext.Channel",!0)||!1,content_type:this.getPageMeta("DCSext.Content_Type",!0)||!1,article_id:this.getPageMeta("DCSext.articleId")||!1,article_author:this.getPageMeta("DCSext.author",!0)||!1,article_first_published:this.getPageMeta("DCSext.articleFirstPublished")||!1,page_renderer:this.getPageRenderer()||!1,business_segment:this.getPageMeta("tmgads.businessSegment",!0)||!1,category:this.getPageMeta("DCSext.Category",!0)||!1,category_id:this.getPageMeta("tmgads.channel",!0)||!1,keywords:this.getPageMeta("keywords",!0)||!1,premium_override:this.getPageMeta("tmg.premium.override"),premium_state:this.getPageMeta("tmg.premium.state")||!1,icid:this.getPageIcid()||!1,offer_id:this.getOfferID()||!1,user_status:this.getUserStatus(this.getCookies().tmg_p13n)||!1,cookie_consent:_("consentStatus.hasConsentData","_sp_user_consent_4917")||!1,country_with_cookie_banner:this.getIsCountryWithCookieBanner(this.getGeoLocation(this.getGeoISO()))||!1,country_sell_allowed:this.getIsCountryAllowToSell(this.getGeoLocation(this.getGeoISO()))||!1,subscriber_type:this.getSubscriptionType(this.getCookies().tmg_p13n)||!1,reader_type_extensions:this.getUserTypeExtensions(this.getCookies().tmg_p13n,"readerTypeExtension")||!1,published_range_one_day:this.getArticlePublicRange(1)||!1,published_range_two_day:this.getArticlePublicRange(2)||!1,published_range_one_week:this.getArticlePublicRange(7)||!1,is_google_showcase:this.getPageMeta("tmg.isGoogleShowcase",!0)||!1}}}]),e}(),K=function(){return!!ae()},Y=function(){return!!re()},X=function(){return!!ne()},$=function(){return T.excluded.includes(document.location.host)},Z=function(){return!(!window.tmg||!window.tmg.fbnBypass)},ee=function(){return!!(window.console&&window.console.log&&/martech_disable=(1|true)/i.test(location.search))},te=function(){for(var e=location.search.replace("?","").split("&"),t=0;t<e.length;t++){var r=e[t].split("=");if("martech_turnoff"===r[0])return r[1].split(",")}return!1},re=function(){return!!(window.console&&window.console.log&&/martech_dev=(1|true)/i.test(location.search))},ne=function(){return!!(window.console&&window.console.log&&/martech_preprod=(1|true)/i.test(location.search))},ae=function(){return!!(window.console&&window.console.log&&/martech_local=(1|true)/i.test(location.search))},ie=function(){return!1},oe=function(){return window.console&&window.console.log&&/martech_debug=(1|true)/i.test(location.search)},se={env:"prod",domain:T.prod,flags:{debug:oe()||ie(),disabled:!!(ee()||$()||Z()),prod:!(X()||Y()||K()),preprod:X(),dev:Y(),local:K(),turnoff:te()||!1,overrides:function(){for(var e={group_control:!1,group_variation:!1},t=location.search.replace("?","").split("&"),r=0;r<t.length;r++){var n=t[r].split("=");"martech_splitgroup_control"===n[0]&&(e.group_control=n[1]),"martech_splitgroup_variation"===n[0]&&(e.group_variation=n[1])}return e}()}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=_("profile.user.session");if(!t||t.expire<Date.now())return le(e);var r=ue();return{id:t.id,expire:r,newSession:!1}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=ue(e),r=de(),n={id:r,expire:t,newSession:!0};return n},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return Date.now()+60*e*1e3},de=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:42,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ_-&abcdefghijklmnopqrstuvwxyz0123456789",n=r.length,a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t};function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var he=function(e){var t=[];return e.forEach((function(e){t.push(ge(ge({},e),{},{campaignId:e.campaignId&&"number"==typeof e.campaignId?e.campaignId:fe("".concat(e.className))}))})),t},fe=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].charCodeAt(0);return 911e4+t};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be,_e,Se,xe,Pe=-1,ke=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Pe=t.timeStamp,e(t))}),!0)},Oe=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Te=function(){var e=Oe();return e&&e.activationStart||0},Ae=function(e,t){var r=Oe(),n="navigate";return Pe>=0?n="back-forward-cache":r&&(n=document.prerendering||Te()>0?"prerender":r.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},Ee=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},Ce=function(e,t){var r=function r(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||(e(n),t&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},Me=function(e,t,r,n){var a,i;return function(o){t.value>=0&&(o||n)&&((i=t.value-(a||0))||void 0===a)&&(a=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},De=-1,je=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ve=function(){Ce((function(e){var t=e.timeStamp;De=t}),!0)},Ne=function(){return De<0&&(De=je(),Ve(),ke((function(){setTimeout((function(){De=je(),Ve()}),0)}))),{get firstHiddenTime(){return De}}},Ie=function(e,t){t=t||{};var r,n=[1800,3e3],a=Ne(),i=Ae("FCP"),o=function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(c&&c.disconnect(),e.startTime<a.firstHiddenTime&&(i.value=Math.max(e.startTime-Te(),0),i.entries.push(e),r(!0)))}))},s=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],c=s?null:Ee("paint",o);(s||c)&&(r=Me(e,i,n,t.reportAllChanges),s&&o([s]),ke((function(a){i=Ae("FCP"),r=Me(e,i,n,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-a.timeStamp,r(!0)}))}))})))},Le=!1,Ge=-1,Re={passive:!0,capture:!0},Be=new Date,We=function(e,t){be||(be=t,_e=e,Se=new Date,ze(removeEventListener),Fe())},Fe=function(){if(_e>=0&&_e<Se-Be){var e={entryType:"first-input",name:be.type,target:be.target,cancelable:be.cancelable,startTime:be.timeStamp,processingStart:be.timeStamp+_e};xe.forEach((function(t){t(e)})),xe=[]}},qe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){We(e,t),a()},n=function(){a()},a=function(){removeEventListener("pointerup",r,Re),removeEventListener("pointercancel",n,Re)};addEventListener("pointerup",r,Re),addEventListener("pointercancel",n,Re)}(t,e):We(t,e)}},ze=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,qe,Re)}))},Ue={},He=function(e,t){t=t||{};var r=[800,1800],n=Ae("TTFB"),a=Me(e,n,r,t.reportAllChanges);!function e(t){document.prerendering?addEventListener("prerenderingchange",(function(){return e(t)}),!0):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)}((function(){var i=Oe();if(i){if(n.value=Math.max(i.responseStart-Te(),0),n.value<0||n.value>performance.now())return;n.entries=[i],a(!0),ke((function(){n=Ae("TTFB",0),(a=Me(e,n,r,t.reportAllChanges))(!0)}))}}))},Je=function(e){y(e,"CWV ::")},Qe=function(){!function(e,t){t=t||{};var r=[.1,.25];Le||(Ie((function(e){Ge=e.value})),Le=!0);var n,a=function(t){Ge>-1&&e(t)},i=Ae("CLS",0),o=0,s=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>i.value&&(i.value=o,i.entries=s,n())}}))},l=Ee("layout-shift",c);l&&(n=Me(a,i,r,t.reportAllChanges),Ce((function(){c(l.takeRecords()),n(!0)})),ke((function(){o=0,Ge=-1,i=Ae("CLS",0),n=Me(a,i,r,t.reportAllChanges)})))}(Je),function(e,t){t=t||{};var r,n=[100,300],a=Ne(),i=Ae("FID"),o=function(e){e.startTime<a.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},s=function(e){e.forEach(o)},c=Ee("first-input",s);r=Me(e,i,n,t.reportAllChanges),c&&Ce((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&ke((function(){var a;i=Ae("FID"),r=Me(e,i,n,t.reportAllChanges),xe=[],_e=-1,be=null,ze(addEventListener),a=o,xe.push(a),Fe()}))}(Je),function(e,t){t=t||{};var r,n=[2500,4e3],a=Ne(),i=Ae("LCP"),o=function(e){var t=e[e.length-1];if(t){var n=Math.max(t.startTime-Te(),0);n<a.firstHiddenTime&&(i.value=n,i.entries=[t],r())}},s=Ee("largest-contentful-paint",o);if(s){r=Me(e,i,n,t.reportAllChanges);var c=function(){Ue[i.id]||(o(s.takeRecords()),s.disconnect(),Ue[i.id]=!0,r(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),Ce(c,!0),ke((function(a){i=Ae("LCP"),r=Me(e,i,n,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-a.timeStamp,Ue[i.id]=!0,r(!0)}))}))}))}}(Je),He(Je)};function Ke(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze={web5674SmartbannerChromeApp:function(e){var t=new N(e);return{className:"SmartAppBannerChrome",folder:"WEB-5674--smartbanner-chrome-app",env:"all",targetting:{userIsSubscriber:t.getVisitorData("user_status.logged_in_subscriber",!0),isHandheld:t.getVisitorData("mobile_device_is_tablet",!0)||t.getVisitorData("mobile_device_is_mobile",!0),isBrowser:t.getVisitorData("browser_name","Chrome")}}},tgt953RubikNoscoreHighlyEngagedSlideover:function(e){var t=new N(e);return{className:"HardSlideover",campaignId:612935,folder:"TGT-953--highly-engaged-slideover",env:"all",manual:!0,targetting:{page:t.customAudience("Page: Articles & Galleries"),user:t.getVisitorData("user_status.anonymous",!0)||t.getVisitorData("user_status.registered",!0),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeGoogleShowcase:t.getVisitorData("is_google_showcase",!1),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeQueenCommemorative:!t.getVisitorData("page_url_path","/royal-family/0/hm-queen-elizabeth-ii-definitive-record-life-death/",!1),excludeUrlsHardOverlays:t.customAudience("Exclusion: Hard Overlay Page URLs"),excludeOldGalleries:!t.getVisitorData("page_renderer","galleryrenderer")},xtTest:[{name:"standard",targetting:!0,thirdParty:{visitorType:[{property:"adobeTarget.aam.visitor10PlusPVsL30D",operator:"equal",value:!0,as:"visitor10PlusPVsL30D"},{property:"adobeTarget.aam.anon30OrMoreVisits",operator:"equal",value:!0,as:"anon30OrMoreVisits"},{property:"adobeTarget.aam.reg30OrMoreVisits",operator:"equal",value:!0,as:"reg30OrMoreVisits"}],internal:[{property:"adobeTarget.profileScripts.internalTMGPlusVPN",operator:"not contains",value:"status:true",as:"internalTMGPlusVPN"}]}}]}},tgt953RubikHighlyEngagedSlideover:function(e){var t=new N(e);return{className:"HardSlideover",campaignId:612935,folder:"TGT-953--highly-engaged-slideover",env:"all",manual:!0,targetting:{page:t.customAudience("Page: Articles & Galleries"),user:t.getVisitorData("user_status.anonymous",!0)||t.getVisitorData("user_status.registered",!0),excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeStandard:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),excludeGoogleShowcase:t.getVisitorData("is_google_showcase",!1),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeQueenCommemorative:!t.getVisitorData("page_url_path","/royal-family/0/hm-queen-elizabeth-ii-definitive-record-life-death/",!1),excludeUrlsHardOverlays:t.customAudience("Exclusion: Hard Overlay Page URLs"),excludeOldGalleries:!t.getVisitorData("page_renderer","galleryrenderer")},thirdParty:{internal:[{property:"adobeTarget.profileScripts.internalTMGPlusVPN",operator:"not contains",value:"status:true",as:"internalTMGPlusVPN"}]},xtTest:[{name:"standard",targetting:!0}]}},tgt70RevenueRegsTracking:function(){return{className:"TrackSubsRegs",folder:"TGT-70--revenue-regs-tracking",env:"all",targetting:!0}},tgt44HideCancellationButton:function(e){var t=new N(e);return{className:"HideCancButton",campaignId:338392,folder:"TGT-44--hide-cancellation-button",env:"all",spaView:"customer/secure/subscriptiondetails",targetting:{page:t.getVisitorData("page_url_path","/customer/secure/",!1)},xtTest:[{name:"international",targetting:{geoLocation:!t.getVisitorData("geo_location","united kingdom")}},{name:"less-than-six-months-tenure",targetting:!0,thirdParty:{tenure:[{property:"adobeTarget.attributes.days_since_latest_sub_chain",operator:"less",value:180,as:"days_since_latest_sub_chain"}]}}]}},tgt395RubikMartechOverlay:function(e){var t=new N(e);return{className:"MartechOverlay",folder:"TGT-395--martech-overlay",env:"all",manual:!0,targetting:{standardExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),noGoogleShowcase:t.getVisitorData("is_google_showcase",!1),user:t.getVisitorData("user_status.subscriber",!1,!0)},xtTest:[{name:"aem-hard-overlay",targetting:{page:t.customAudience("Page: Articles & Galleries"),excludeStaging:!t.customAudience("Domain: Staging Environment"),hardOverlayPageURLs:t.customAudience("Exclusion: Hard Overlay Page URLs"),travel:t.getVisitorData("channel","travel")},thirdParty:{publishedThreshold:[{property:"adobeTarget.profileScripts.publishedDateCheck",operator:"contains",value:"status:true",as:"publishedDateCheck"}],internal:[{property:"adobeTarget.profileScripts.internalTMGPlusVPN",operator:"not contains",value:"status:true",as:"internalTMGPlusVPN"}]}},{name:"general-soft-overlay",targetting:{excludePuzzlesNews:!t.getVisitorData("page_url_path","puzzles-news",!1),excludeCommercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludePlusWord:!t.getVisitorData("page_url_path","/news/plusword/",!1),ukIntRuleSet:t.getVisitorData("geo_location","united kingdom")&&t.getVisitorData("premium_state",!0)||!t.getVisitorData("geo_location","united kingdom")&&(t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Topic")||t.customAudience("Page: Index")),excludeCustomerPages:!t.customAudience("Page: Acquisition pages"),excludeSocialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting")},thirdParty:{displayOnViews:[{property:"adobeTarget.profileScripts.bauSoftOverlay",operator:"contains",value:"status=true",as:"bauSoftOverlay"}]}}]}},tgt390MartechPaywall:function(e){var t=new N(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!0,targetting:{contentType:t.customAudience("Page: Articles & Galleries"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),mainExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot")},thirdParty:{student:[{property:"adobeTarget.aam.student",as:"student"}]},xtTest:[{name:"temp-heho-case",targetting:{primaryPaywallRuleset:!t.customAudience("Paywalls: Sedondary Paywall Ruleset"),status:t.getVisitorData("user_status.logged_out_subscriber",!1)&&t.getVisitorData("user_status.logged_out_registered",!1),contentType:!t.getVisitorData("content_type","gallery")},thirdParty:{visitorType:[{property:"adobeTarget.aam.visitor10PlusPVsL30D",operator:"equal",value:!0,as:"visitor10PlusPVsL30D"},{property:"adobeTarget.aam.anon30OrMoreVisits",operator:"equal",value:!0,as:"anon30OrMoreVisits"},{property:"adobeTarget.aam.reg30OrMoreVisits",operator:"equal",value:!0,as:"reg30OrMoreVisits"}],internal:[{property:"adobeTarget.profileScripts.internalTMGPlusVPN",operator:"not contains",value:"status:true",as:"internalTMGPlusVPN"}]}},{name:"secondary-paywall",targetting:{secondaryPaywallRuleset:t.customAudience("Paywalls: Sedondary Paywall Ruleset"),status:t.getVisitorData("user_status.logged_out_subscriber",!1)&&t.getVisitorData("user_status.logged_out_registered",!1),contentType:!t.getVisitorData("content_type","gallery")}},{name:"primary-paywall",targetting:{primaryPaywallRuleset:!t.customAudience("Paywalls: Sedondary Paywall Ruleset"),status:t.getVisitorData("user_status.logged_out_subscriber",!1)&&t.getVisitorData("user_status.logged_out_registered",!1),contentType:!t.getVisitorData("content_type","gallery")}},{name:"login-paywall",targetting:{status:t.getVisitorData("user_status.logged_out_subscriber",!0)||t.getVisitorData("user_status.logged_out_registered",!0),contentType:!t.getVisitorData("content_type","gallery")}},{name:"primary-gallery-paywall",targetting:{contentType:t.getVisitorData("content_type","gallery"),renderer:t.getVisitorData("page_renderer","galleryRenderer2",!0)}},{name:"secondary-gallery-paywall",targetting:{contentType:t.getVisitorData("content_type","gallery"),renderer:t.getVisitorData("page_renderer","galleryRenderer",!0)}}]}},tgt256GoogleOneTapLibrary:function(e){var t=new N(e);return{className:"GoogleOneTapLibrary",folder:"TGT-256--google-one-tap-library",env:"all",targetting:{excludeTravelCommercial:t.customAudience("Exclusion: Travel Commercial"),excludeCustomerPages:!t.getVisitorData("page_url_path","/customer/",!1),excludeGoogleShowcase:t.getVisitorData("is_google_showcase",!1),userIsAnon:t.getVisitorData("user_status.anonymous",!0),query:!t.getVisitorData("page_url_query","google-one-tap=false",!1)}}},tgt1509CancellationJourneyDualvisualsAb:function(e){return{className:"CancellationDualVisualsAB",folder:"TGT-1509--cancellation-journey-dualvisuals-ab",env:"all",spaView:"customer/secure/subscriptiondetails",targetting:{page:new N(e).getVisitorData("page_url_path","/customer/secure/",!1)},abTest:{script:"splitGroupAB",node:"TGT-1509--cancellation-journey-dualvisuals-ab",split:[{name:"control",value:"GroupA"},{name:"variation",value:"GroupB"}]}}},tgt1399RubikFailScore:function(e){return{className:"RubikFailScore",folder:"TGT-1399--rubik-fail-score",env:"all",targetting:{notSubscriber:!new N(e).getVisitorData("user_status.subscriber",!0)}}},tgt1369PluswordOverlay:function(e){var t=new N(e);return{className:"PluswordOverlay",folder:"TGT-1369--plusword-overlay",env:"all",targetting:{pluswordPage:t.getVisitorData("page_url_path","/news/plusword/",!1),profileScripts:t.getPScriptData("displayInterval","statuses.TGT-1369--plusword-overlay",!0)}}},tgt1205PianoLibrary:function(e){return{className:"PianoLibrary",folder:"TGT-1205--piano-library",env:"all",targetting:{page:!new N(e).getVisitorData("page_url_path","/customer/",!1)}}},tgt1018RubikSoftStickyFooter:function(e){var t=new N(e);return{className:"SoftStickyFooter",folder:"TGT-1018--soft-sticky-footer",env:"all",manual:!0,targetting:{mainExclusion:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),commercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),socialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeIE:!t.getVisitorData("browser_name","IE"),otheExclusions:!(t.getVisitorData("user_status.subscriber",!0)||t.getVisitorData("is_google_showcase",!0)||t.getVisitorData("channel","global-health")||t.getVisitorData("page_url_path","puzzles-news",!1)),page:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Index")||t.customAudience("Page: Topic")},thirdParty:{expandCollapse:[{property:"adobeTarget.profileScripts.softStickyFooter",as:"softStickyFooter"}]}}},tgt1018RubikNoscoreSoftStickyFooter:function(e){var t=new N(e);return{className:"SoftStickyFooter",folder:"TGT-1018--soft-sticky-footer",env:"all",manual:!0,targetting:{mainExclusion:t.customAudience("Exclusion: Portal, Secure, Corporate, Sponsored, Events, FS, Bot"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),commercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),socialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludeIE:!t.getVisitorData("browser_name","IE"),otheExclusions:!(t.getVisitorData("user_status.subscriber",!0)||t.getVisitorData("is_google_showcase",!0)||t.getVisitorData("page_url_path","puzzles-news",!1)),openPages:t.getVisitorData("premium_state",!1),geoLocation:t.getVisitorData("geo_location","united kingdom"),page:t.customAudience("Page: Articles & Galleries")||t.customAudience("Page: Index")||t.customAudience("Page: Topic")},thirdParty:{expandCollapse:[{property:"adobeTarget.profileScripts.softStickyFooter",as:"softStickyFooter"}]}}},tgt1002PaywallMetersProfile:function(e){return{className:"PaywallMetersProfile",folder:"TGT-1002--paywall-meters-profile",env:"all",targetting:{page:!new N(e).getVisitorData("page_url_path","/customer/",!1)}}},qaMartechPaywall:function(e){var t=new N(e);return{className:"MartechPaywall",folder:"TGT-390--martech-paywall",env:"all",manual:!0,targetting:{contentType:t.customAudience("Page: Articles & Galleries"),includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall",!1)},xtTest:[{name:"secondary-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=secondary",!1)}},{name:"primary-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=primary",!1)}},{name:"login-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=login",!1)}},{name:"primary-gallery-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=gallery-primary",!1)}},{name:"secondary-gallery-paywall",targetting:{includeQueryParam:t.getVisitorData("page_url","martech_qa_paywall=gallery-secondary",!1)}}]}},qaMartechOverlay:function(e){var t=new N(e);return{className:"MartechOverlay",folder:"TGT-395--martech-overlay",env:"all",manual:!0,targetting:{standardExclusion:t.customAudience("Exclusion: Secure, Corporate, Sponsored, Events, FS, Bot"),travelExclusion:t.customAudience("Exclusion: Travel Commercial"),noGoogleShowcase:t.getVisitorData("is_google_showcase",!1),user:t.getVisitorData("user_status.subscriber",!1,!0),includeQueryParam:t.getVisitorData("page_url","martech_qa_overlay",!1)},xtTest:[{name:"aem-hard-overlay",targetting:{page:t.customAudience("Page: Articles & Galleries"),includeQueryParam:t.getVisitorData("page_url","martech_qa_overlay=hard",!1)}},{name:"general-soft-overlay",targetting:{excludePuzzlesNews:!t.getVisitorData("page_url_path","puzzles-news",!1),excludeCommercialArticles:t.customAudience("Exclusion: Commercial Articles (Soft Experiences)"),excludeSyndication:!t.getVisitorData("page_url_path","/syndication/",!1),excludePlusWord:!t.getVisitorData("page_url_path","/news/plusword/",!1),excludeCustomerPages:!t.customAudience("Page: Acquisition pages"),excludeSocialMedialArticles:t.customAudience("Exclusion: Social Media Articles Targeting"),includeQueryParam:t.getVisitorData("page_url","martech_qa_overlay=soft",!1)}}]}},qaMartechHighlyEngagedSlideover:function(e){var t=new N(e);return{className:"HardSlideover",folder:"TGT-953--highly-engaged-slideover",env:"all",manual:!0,targetting:{page:t.customAudience("Page: Articles & Galleries")},xtTest:[{name:"standard",targetting:{includeQueryParam:t.getVisitorData("page_url_query","martech_qa_slideover=standard",!1)}}]}}},et={userHistory:function(e,t){return{previous_page:!1,current_page:!1,last_visited_pages:!1,last_visited_articles:!1,last_visited_index_pages:!1,last_visited_article_tags:!1}}};et.splitGroupAB=function(e,t){var r=function(e){var t,r,n=(t=1,r=100,Math.random()*(r-t)+t);return{number:n,group:n<=e?"control":"variation"}},n={"TGT-1539--us-daypass-hard-overlay":90,"TGT-1509--cancellation-journey-dualvisuals-ab":50},a=t.splitGroupAB||{},i=a._internal||{};return Object.keys(n).forEach((function(e){if(!a[e]){var t=r(n[e]);a[e]=t.group,i[e]=t.number}})),ve(ve({},a),{},{_internal:i})},et.pageViews=function(e,t){var r=t.pageViews||{},n=!(!r._internal||!r._internal.current_page)&&r._internal.current_page,a=e.visitor.page_url_path,i=r.page_views||0,o=r.index_views||0,s=r.homepage_views||0,c=r.articles_views||0,l=r.gallery_views||0,u=r.sub_funnel_views||0,d=r.my_account_views||0,p=r.my_feed_views||0;return a!==n&&(i+=1,"index"===e.visitor.content_type&&(o+=1),"homepage"===e.visitor.page_type&&(s+=1),"article"===e.visitor.page_type&&(c+=1),"gallery"===e.visitor.page_type&&(l+=1),e.visitor.page_url_path.includes("/secure/")&&(u+=1),e.visitor.page_url_path.includes("/secure/account")&&(d+=1),e.visitor.page_url_path.includes("/mytelegraph/")&&(p+=1)),{_internal:{previous_page:n,current_page:a},page_views:i,index_views:o,homepage_views:s,articles_views:c,gallery_views:l,sub_funnel_views:u,my_account_views:d,my_feed_views:p}},et.displayInterval=function(e,t){var r={"TGT-40--login-overlay-subs-and-reg":7,"TGT-1369--plusword-overlay":1},n=t.displayInterval||{},a=Date.now(),i=n.statuses||{};return Object.keys(r).forEach((function(e){if(n[e]){var t=(a-n[e])/864e5;i[e]=t>r[e]}else i[e]=!0})),we(we({},n),{},{statuses:i,_internal:{intervals:r}})};var tt=function(){function e(){g()(this,e),this.env=se,this.audienceList=Ze,this.thirdPartyData={},this.env.flags.debug&&Qe()}var t,r;return f()(e,[{key:"init",value:(r=d()(v.a.mark((function e(){var t,r,n,a,i,o,s=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]&&s[0],r=s.length>1&&void 0!==s[1]&&s[1],this.triggeredView=t,this.matchedView=!(!t||!this.checkMatchedView(t))&&{name:t,page:r&&r.page||!1,data:r&&r.data||!1},"prod"===this.env.env&&(this.env.flags.disabled||this.env.flags.preprod||this.env.flags.dev||this.env.flags.local)?this.codebaseSwitch():(this.triggeredView||this.createObject(),n=(new Q).init(),this.profile=new G(n),a=this.profile.getProfile(),i={p13n:n.cookies.tmg_p13n,visitor:$e({},n),environment:this.env,triggeredView:this.triggeredView,matchedView:this.matchedView,user:$e($e({},a.user),{},{session:ce()})},o=!this.matchedView||this.matchedView&&!1!==this.matchedView.page?this.runProfileScripts(i,a.profileScripts):a.profileScripts,this.startup($e($e({},i),{},{profileScripts:this.overrideSplitByQuery(i,o)||{}})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"codebaseSwitch",value:function(){if(this.env.flags.disabled)y("CORE :: Delivery disabled due to querystring | localstorage | excluded domains | flags.");else if(this.env.flags.local)y("CORE :: Delivery disabled due to LOCAL codebase running...");else if(this.env.flags.preprod){y("CORE :: Switching library to PREPROD environment.");var e=document.createElement("script");e.type="text/javascript",e.src="".concat(T.preprod,"js/core.min.js"),e.id="martech-core-preprod",document.head.appendChild(e)}else if(this.env.flags.dev){y("CORE :: Switching library to DEV environment.");var t=document.createElement("script");t.type="text/javascript",t.src="".concat(T.dev,"js/core.min.js"),t.id="martech-core-dev",document.head.appendChild(t)}else y("CORE :: Delivery disabled due unknown cause...")}},{key:"startup",value:function(e){this.core=e,this.profile.createProfile(this.core),this.defaultActivityConfig={core:$e({},this.core)},y(this.core,"CORE Data ::"),this.triggeredView&&this.env.flags.debug&&window.martech.info.triggeredViews.push(this.triggeredView),this.matchedView&&this.env.flags.debug&&window.martech.info.matchedViews.push(this.matchedView.name),this.env.flags.debug&&(window.martech.user=this.core.user,window.martech.info.profileScripts=this.core.profileScripts,window.martech.info.session=this.core.user.session,window.martech.visitor=this.core.visitor),this.getActivities(this.matchedView,this.triggeredView),this.triggeredView||(this.runLocally(),this.listener())}},{key:"createObject",value:function(){window.martech=window.martech||{},w("classes"),this.env.flags.debug?(w("visitor"),w("offers"),w("info",{activitiesExcluded:[],environment:this.env,triggeredViews:[],matchedViews:[],displayed:{}})):w("info",{displayed:{}}),w("tools",{callbacks:k,triggerView:function(e){y("CORE :: triggerView not ready.. for ".concat(e))}}),this.env.flags.debug&&(window.martech.info.debug=!0),window.dataLayer&&(window.dataLayer.martech=window.dataLayer.martech||{})}},{key:"runProfileScripts",value:function(e,t){var r={};for(var n in et)"function"==typeof et[n]&&(r[n]=et[n](e,t));return r}},{key:"overrideSplitByQuery",value:function(e,t){var r=e.environment.flags.overrides||!1,n=$e({},t);return null!=r&&r.group_control&&Object.keys(t.splitGroupAB).includes(r.group_control)&&(n.splitGroupAB[r.group_control]="control",n.splitGroupAB._internal[r.group_control]="overridden"),null!=r&&r.group_variation&&Object.keys(t.splitGroupAB).includes(r.group_variation)&&(n.splitGroupAB[r.group_variation]="variation",n.splitGroupAB._internal[r.group_variation]="overridden"),n}},{key:"getAudiences",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];for(var n in this.audienceList)if(t){if("function"==typeof this.audienceList[n]&&n===t){var a=this.audienceList[n](e);r.push($e($e({},a),{},{audienceLabel:n}))}}else if("function"==typeof this.audienceList[n]){var i=this.audienceList[n](e);r.push($e($e({},i),{},{audienceLabel:n}))}return t&&!r.length>0&&y('CORE :: getAudiences :: No Audience found for "'.concat(t,'".')),r}},{key:"checkMatchedView",value:function(e){if(!e)return!1;var t=this.audiences.filter((function(t){return t.spaView===e}));return t.length>0?y("CORE :: checkMatchedView :: View ".concat(e," Found.")):y("CORE :: checkMatchedView :: View ".concat(e," NOT found.")),t.length>0}},{key:"runAudience",value:(t=d()(v.a.mark((function e(t){var r,n,i,s,c,l,u,p,g,h,f,m,y,w,b,_,S,x,P,k,O=this,T=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=T.length>1&&void 0!==T[1]&&T[1],n=T.length>2&&void 0!==T[2]&&T[2],i=T.length>3&&void 0!==T[3]&&T[3],s=T.length>4&&void 0!==T[4]&&T[4],c=T.length>5&&void 0!==T[5]?T[5]:{},l=function(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)},u=t.targetting,p=[],g={},h={},"object"===o()(u))for(f in u)!0!==u[f]&&p.push(!1);else!0!==u&&p.push(!1);if(!t.thirdParty||"object"!==o()(t.thirdParty)||null===t.thirdParty){e.next=23;break}m=t.thirdParty,y=[],w=v.a.mark((function e(r){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m[r],a=[],e.next=4,Promise.all(n.map(function(){var e=d()(v.a.mark((function e(n,i){var o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.waitFor3rdPartyData(n.property,n.value,n.operator||!1);case 2:o=e.sent,s=l(n.property,O.thirdPartyData),t.thirdParty[r][i].retrieved=s,n.operator&&(t.thirdParty[r][i].match=!!o),o&&(a.push(!0),g[n.as]=o.value);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 4:!(a=a.filter((function(e){return!0===e}))).length>0?y.push(!1):y.push(!0);case 6:case"end":return e.stop()}}),e)})),e.t0=v.a.keys(m);case 16:if((e.t1=e.t0()).done){e.next=21;break}return b=e.t1.value,e.delegateYield(w(b),"t2",19);case 19:e.next=16;break;case 21:(y=y.filter((function(e){return!0!==e}))).length>0&&p.push(!1);case 23:if("all"===t.env||t.env.includes(this.core.environment.env)||p.push(!1),t.manual&&!i&&p.push(!1),t.spaView&&!r&&this.core.visitor.page_url_path.includes("/customer/")&&this.preloadActivity(t),(!r&&t.spaView||r&&t.spaView&&r.name!==t.spaView||n&&!t.spaView)&&p.push(!1),!(t.abTest&&t.abTest.script&&t.abTest.node&&t.abTest.split&&Array.isArray(t.abTest.split))){e.next=32;break}_=t.abTest,this.core.profileScripts[_.script]&&this.core.profileScripts[_.script][_.node]&&_.split.forEach((function(e,t){e.value===O.core.profileScripts[_.script][_.node]&&(h={experienceNumber:t,experienceName:e.name})})),e.next=55;break;case 32:if(!t.xtTest||!Array.isArray(t.xtTest)){e.next=55;break}S=[],x=Ke(t.xtTest.entries()),e.prev=35,k=v.a.mark((function e(){var r,n,i,s,c,u,p,f,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a()(P.value,2),n=r[0],i=r[1],s=[],"object"===o()(i.targetting))for(c in i.targetting)!0!==i.targetting[c]&&s.push(!1);else!0!==i.targetting&&s.push(!1);if(!i.thirdParty||"object"!==o()(i.thirdParty)||null===i.thirdParty){e.next=15;break}u=i.thirdParty,p=[],f=v.a.mark((function e(r){var a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u[r],i=[],e.next=4,Promise.all(a.map(function(){var e=d()(v.a.mark((function e(a,o){var s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.waitFor3rdPartyData(a.property,a.value,a.operator||!1);case 2:s=e.sent,c=l(a.property,O.thirdPartyData),t.xtTest[n].thirdParty[r][o].retrieved=c,a.operator&&(t.xtTest[n].thirdParty[r][o].match=!!s),s&&(i.push(!0),g[a.as]=s.value);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 4:!(i=i.filter((function(e){return!0===e}))).length>0?p.push(!1):p.push(!0);case 6:case"end":return e.stop()}}),e)})),e.t0=v.a.keys(u);case 8:if((e.t1=e.t0()).done){e.next=13;break}return m=e.t1.value,e.delegateYield(f(m),"t2",11);case 11:e.next=8;break;case 13:(p=p.filter((function(e){return!0!==e}))).length>0&&s.push(!1);case 15:if(!(!(s=s.filter((function(e){return!0!==e}))).length>0)){e.next=22;break}return h={experienceNumber:n,experienceName:i.name},S=[],e.abrupt("return","break");case 22:S.push(!1);case 23:case"end":return e.stop()}}),e)})),x.s();case 38:if((P=x.n()).done){e.next=45;break}return e.delegateYield(k(),"t3",40);case 40:if("break"!==e.t3){e.next=43;break}return e.abrupt("break",45);case 43:e.next=38;break;case 45:e.next=50;break;case 47:e.prev=47,e.t4=e.catch(35),x.e(e.t4);case 50:return e.prev=50,x.f(),e.finish(50);case 53:(S=S.filter((function(e){return!0!==e}))).length>0&&p.push(!1);case 55:!(p=p.filter((function(e){return!0!==e}))).length>0&&!window.martech.audiences.matched.filter((function(e){return e.className===t.className&&e.audienceLabel===t.audienceLabel})).length>0&&(this.runner(t,h,g,s,c),window.martech.audiences.matched.push(t)),!window.martech.audiences.all.filter((function(e){return e.className===t.className&&e.audienceLabel===t.audienceLabel})).length>0&&window.martech.audiences.all.push(t);case 59:case"end":return e.stop()}}),e,this,[[35,47,50,53]])}))),function(e){return t.apply(this,arguments)})},{key:"getActivity",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.audience=he(this.getAudiences(this.core,n)),this.audience.length>0&&this.audience.forEach((function(n){e.runAudience(n,t,r,!0,a,i)}))}},{key:"getActivities",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.audiences=he(this.getAudiences(this.core)),w("audiences.all",[]),w("audiences.matched",[]),this.audiences.length>0&&this.audiences.forEach((function(n){e.runAudience(n,t,r)}))}},{key:"waitFor3rdPartyData",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)};return new Promise((function(i){!function o(s,c){if(++s<=20){var l=a(e,c);if(null!=l)if(void 0!==t)if(n)switch(n){case"contains":return l.includes(t)?i({value:l}):i(!1);case"not contains":return l.includes(t)?i(!1):i({value:l});case"equal":return i(l===t&&{value:l});case"not equal":return i(l!==t&&{value:l});case"greater":return i(l>t&&{value:l});case"not greater":return i(!(l>t)&&{value:l});case"less":return i(l<t&&{value:l});case"not less":return i(!(l<t)&&{value:l});default:return i(l===t&&{value:l})}else i(l===t&&{value:l});else i({value:l});else setTimeout((function(){return o(s,r.thirdPartyData)}),200)}else if(n)switch(n){case"equal":return i(null===t&&{value:!0});case"not equal":return i(null!==t&&{value:!0});default:return i(!1)}else i({value:!1})}(0,r.thirdPartyData)}))}},{key:"runner",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=$e($e($e($e({},this.defaultActivityConfig),{},{audienceLabel:e.audienceLabel,campaignId:e.campaignId,campaignName:e.campaignName||e.folder,campaignClass:e.className,campaignFolder:e.folder,campaignType:n||"core",custom:e.custom||!1,experienceNumber:0,experienceName:"control"},t),r),a);this.injector(i)}},{key:"runLocally",value:function(){if(this.env.flags.local&&I.campaignClass&&I.campaignFolder){var e=$e($e($e({},this.defaultActivityConfig),{},{experienceNumber:0,experienceName:"control",campaignType:"local"},I),{},{campaignName:I.campaignName||I.campaignFolder,campaignId:parseInt(I.campaignId,10)||101010101});this.injector(e)}}},{key:"adobeGetOffers",value:function(){var e=this;adobe.target.getOffer({mbox:"target-global-mbox",params:{"tmg.isCore":"true"},success:function(t){var r={raw:t,json:[]};t.forEach((function(t){"setJson"===t.action&&(r.json.push(t),y(t.content,"CORE :: getOffers AT.JS :: Adobe Target JSON offers retrieved."),t.content.forEach((function(t){var r=$e($e($e({},e.defaultActivityConfig),t),{},{campaignId:parseInt(t.campaignId,10),campaignName:t.campaignName||t.campaignFolder,campaignType:t.campaignType||"adobeTargetJSON",experienceNumber:t.experienceNumber&&parseInt(t.experienceNumber,10)||0});e.injector(r)})))})),e.env.flags.debug&&(window.martech.info.adobeOffers=r.json),y(r,"CORE :: getOffers AT.JS :: Offers retrieved.")},error:function(e,t){y({error:t,status:e},"CORE :: getOffers AT.JS :: Error while loading JSON offer.")}})}},{key:"listener",value:function(){var e=this;window.martech.tools.audience=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&(y('CORE :: window.martech.tools.audience :: Triggered for Audience "'.concat(t,'".')),e.getActivity(e.matchedView,e.triggeredView,t,r,n))},window.martech.tools.launch=function(t){var r=$e($e($e({},e.defaultActivityConfig),t),{},{campaignName:t.campaignName||t.campaignFolder,campaignId:t.campaignId?parseInt(t.campaignId,10):fe(t.campaignName||t.campaignClass),campaignType:t.campaignType||"3rdParty",experienceNumber:t.experienceNumber&&parseInt(t.experienceNumber,10)||0,experienceName:t.experienceName?t.experienceName:"control"});e.injector(r),y("CORE :: window.martech.tools.launch :: Triggered by ".concat(r.campaignType," -> ").concat(t.campaignFolder,"."))},window.martech.tools.triggerView=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:!0,data:!1};y("CORE :: triggerView :: Triggering ".concat(t,".")),e.init(t,r)},window.martech.tools.tp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(y(l()({},r,t),"CORE :: window.martech.tools.tp :: Triggered.. ingesting third party data:"),r){var n=O(e.thirdPartyData,l()({},r,t));e.thirdPartyData=n}e.env.flags.debug&&(window.martech.info.thirdParty=e.thirdPartyData)};(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return new Promise((function(n,a){var i=setInterval((function(){var t=e();t&&(n(t),clearInterval(i))}),r);setTimeout((function(){clearInterval(i),a(new Error(!1))}),t)}))})((function(){return"undefined"!=typeof adobe&&void 0!==adobe.target&&void 0!==adobe.target.getOffer}),5e3).then((function(){e.adobeGetOffers()})).catch((function(){y("CORE :: listener - waitForAdobe AT.JS :: Adobe Object not available.")}))}},{key:"injector",value:function(e){e.campaignClass&&e.campaignFolder?!this.core.environment.flags.turnoff||this.core.environment.flags.turnoff&&!this.core.environment.flags.turnoff.includes(e.campaignId.toString())?this.core.environment.domain?function(e){var t,r,n={wtmc_id:{test:(x("WT.mc_id")||"").includes("tune-in-open-snapchatac"),campaignClasses:["MartechOverlay","CreditCardExpiry","PendingCancModal","PaymentFailureModal","InLifeNewsletterOverlay","EditionAppOverlay"]},flexReg:{test:(null===(t=e.core.p13n)||void 0===t?void 0:t.readerTypeExtension)&&(null===(r=e.core.p13n)||void 0===r?void 0:r.readerTypeExtension.includes("flexreg")),campaignClasses:["MartechOverlay","MartechPaywall","CreditCardExpiry","PendingCancModal","PaymentFailureModal","InLifeNewsletterOverlay","EditionAppOverlay","HardSlideover"]},wine_puzzle_only:{test:e.core.visitor.user_status.type_wine_puzzle_only,campaignClasses:["PendingCancModal","EditionAppOverlay","BonusSubsOverlay","BonusSubsInlineUnit","InLifeNewsletterOverlay"]},digital_light:{test:e.core.visitor.user_status.type_digital_light,campaignClasses:["BonusSubsInlineUnit","InLifeNewsletterOverlay","MartechOverlay","EditionAppOverlay","BonusSubsOverlay"]},fantasySports:{test:"fantasy-sports"===e.core.visitor.channel&&!e.core.visitor.user_status.type_digital_light,campaignClasses:["MartechPaywall","HardSlideover","MartechOverlay","SoftStickyFooter"]},liveBlog:{test:"live"===e.core.visitor.content_type,campaignClasses:[{MartechOverlay:["aem-hard-overlay"]},"HardSlideover","MartechPaywall"]},newLiveBlog:{test:"liveBlogRenderer"===e.core.visitor.page_renderer,campaignClasses:[{MartechOverlay:["aem-hard-overlay"]},"HardSlideover","MartechPaywall","NewsletterUnit"]},globalHealth:{test:"global-health"===e.core.visitor.channel,campaignClasses:["MartechOverlay","MartechPaywall","HardSlideover","SoftStickyFooter"]},rubik_editorial_exclusion:{test:e.core.visitor.keywords&&e.core.visitor.keywords.includes("special exclusion"),campaignClasses:["MartechOverlay","HardSlideover","MartechPaywall","SoftStickyFooter"]},editorialURL:{test:e.core.visitor.page_url_path.includes("/daily-telegraph-book-commemorating-life-reign-queen-elizabeth/"),campaignClasses:["MartechOverlay","MartechPaywall","HardSlideover","SoftStickyFooter"]},londonBridge:{test:e.core.visitor.page_url_path.includes("/her-majesty-queen-elizabeth-ii-obituary/"),campaignClasses:["MartechPaywall"]}};for(var a in n){if(n[a].test&&n[a].campaignClasses&&n[a].campaignClasses.filter((function(t){return"object"===o()(t)?Object.keys(t).includes(e.campaignClass)&&t[Object.keys(t)].includes(e.experienceName):t.includes(e.campaignClass)})).length>0)return y("Core :: Prevention :: ".concat(e.campaignName," will not run because of a Rule: ").concat(a)),e.core.environment.flags.debug&&(window.martech.info.activitiesExcluded=window.martech.info.activitiesExcluded||[],window.martech.info.activitiesExcluded.push(l()({},e.campaignName,a))),!0;if(n[a].test&&n[a].campaignIds&&n[a].campaignIds.includes(e.campaignId))return y("Core :: Prevention :: ".concat(e.campaignName," will not run because of a Rule: ").concat(a)),e.core.environment.flags.debug&&(window.martech.info.activitiesExcluded=window.martech.info.activitiesExcluded||[],window.martech.info.activitiesExcluded.push(l()({},e.campaignName,a))),!0}return!1}(e)||function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(n,a){if(e){var i=document.createElement("script");i.setAttribute("src",e),i.addEventListener("load",n,!1),t&&i.setAttribute("defer","true"),r&&i.setAttribute("async","true"),document.querySelector("head").appendChild(i)}else a(Error("No src supplied"))}))}("".concat(this.core.environment.domain,"js/").concat(e.campaignFolder,"/index.js"),!0).then((function(){"undefined"!==window.martech.classes[e.campaignClass]?new window.martech.classes[e.campaignClass](e).init():y("CORE :: injector :: Activity ".concat(e.campaignName," | type: ").concat(e.campaignType," not found ."))})).catch((function(t){y(t,"CORE :: injector :: Error while trying to inject the activity. Activity ".concat(e.campaignName," not loaded."))})):y("CORE :: injector :: domain not defined. Activity ".concat(e.campaignName," not loaded.")):y("CORE :: injector :: Activity ".concat(e.campaignName," on turnoff list and not loaded.")):y("CORE :: injector :: Activity name and/or folder not provided. Aborting..")}},{key:"preloadActivity",value:function(e){if(document.querySelector("#script--".concat(e.folder)))y("CORE :: preloadActivity :: Activity in ".concat(e.folder," already preloaded."));else{var t=document.createElement("link"),r=document.createElement("link");t.href="".concat(this.core.environment.domain,"js/").concat(e.folder,"/index.js"),r.href="".concat(this.core.environment.domain,"css/").concat(e.folder,"/style.css"),t.rel="preload",r.rel="preload",t.as="script",r.as="style",t.id="script--".concat(e.folder),r.id="style--".concat(e.folder),document.head.appendChild(t),document.head.appendChild(r),y("CORE :: preloadActivity :: Activity in ".concat(e.folder," preloaded."))}}}]),e}();if(-1!==window.location.pathname.indexOf("/customer/")){!function e(t){++t<=20?window.__polyfills&&window.__polyfills.loaded&&!0===window.__polyfills.loaded?(new tt).init():setTimeout((function(){e(t)}),100):(new tt).init()}(0)}else window.tmg&&void 0!==window.tmg.pubsub?window.tmg.pubsub.subscribe({topic:"tmg.polyfill.ready",func:function(){(new tt).init()},runIfAlreadyPublished:!0}):(new tt).init()}]);